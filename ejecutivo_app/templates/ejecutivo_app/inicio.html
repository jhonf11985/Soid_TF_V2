{% extends "core/base.html" %}

{% block title %}Centro Ejecutivo{% endblock %}

{% block content %}
<style>
  .wrap{max-width:1100px;margin:22px auto;padding:16px}
  .head h2{margin:0;font-weight:800}
  .sub{margin:6px 0 18px;color:#6b7280}

  .kpis{display:grid;grid-template-columns:repeat(5,minmax(0,1fr));gap:12px;margin:14px 0 20px}
  .kpi{background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:12px}
  .kpi .label{font-size:12px;color:#6b7280;margin-bottom:4px}
  .kpi .val{font-size:22px;font-weight:800;color:#111827}

  .section-title{margin:0 0 10px;font-weight:800}
  .focos{display:flex;flex-direction:column;gap:10px}
  .foco{background:#fff;border:1px solid #e5e7eb;border-radius:14px;padding:12px;display:flex;justify-content:space-between;gap:12px}
  .foco .t{font-weight:800;margin:0 0 4px}
  .foco .d{margin:0;color:#6b7280}

  .tag{font-size:12px;font-weight:800;padding:4px 10px;border-radius:999px;align-self:flex-start}
  .tag.alta{background:#fee2e2;color:#991b1b}
  .tag.media{background:#fef3c7;color:#92400e}
  .tag.baja{background:#e0f2fe;color:#075985}

  .btn{
    display:inline-block;text-decoration:none;
    padding:8px 12px;border-radius:10px;
    background:#111827;color:#fff;font-weight:700;
    white-space:nowrap;
  }

  .empty{background:#f9fafb;border:1px dashed #e5e7eb;color:#6b7280;border-radius:14px;padding:14px}
  @media (max-width: 1000px){
    .kpis{grid-template-columns:repeat(2,minmax(0,1fr))}
  }
</style>

<div class="wrap">
  <div class="head">
    <h2>Centro Ejecutivo</h2>
    <p class="sub">{{ estado_general }}</p>
  </div>

  <div class="kpis">
    {% for k in kpis %}
      <div class="kpi">
        <div class="label">{{ k.label }}</div>
        <div class="val">{{ k.value }}</div>
      </div>
    {% endfor %}
  </div>

  <h4 class="section-title">Alertas principales</h4>

  {% if focos %}
    <div class="focos">
      {% for f in focos %}
        <div class="foco">
          <div>
            <div class="tag {{ f.nivel }}">{{ f.nivel|capfirst }}</div>
            <p class="t">{{ f.titulo }}</p>
            <p class="d">{{ f.detalle }}</p>
          </div>
          <div>
            <a class="btn" href="{{ f.cta_url }}">{{ f.cta_texto }}</a>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="empty">No hay alertas activas. Si quieres, entramos a “Personas” para revisar en detalle.</div>
  {% endif %}
</div>
{% endblock %}
