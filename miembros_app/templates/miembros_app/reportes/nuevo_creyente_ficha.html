{% extends "core/base_modulo.html" %}

{% block title %}
Ficha del nuevo creyente · Soid_Tf_2
{% endblock %}

{% block breadcrumb %}
Miembros / Nuevos creyentes / Ficha
{% endblock %}

{% block content %}

<section class="page-header no-print">
    <div>
        <h1 class="page-title">
            Ficha del nuevo creyente
        </h1>
        <p class="page-subtitle">
            Información básica registrada para seguimiento espiritual.
        </p>
    </div>

    <div class="page-header-actions">
        <button type="button"
                class="btn-secondary"
                onclick="window.print()">
            <span class="material-icons" style="font-size:16px;">print</span>
            Imprimir
        </button>

        <a href="{% url 'miembros_app:nuevo_creyente_lista' %}"
           class="btn-secondary">
            Volver a la lista
        </a>
    </div>
</section>

<section class="page-section ficha-miembro">

    <h2 class="section-title">Datos personales</h2>

    <div class="data-grid">

        <div class="data-item">
            <span class="label">Nombre completo</span>
            <span class="value">
                {{ miembro.nombres }} {{ miembro.apellidos }}
            </span>
        </div>

        <div class="data-item">
            <span class="label">Género</span>
            <span class="value">
                {% if miembro.genero %}
                    {{ miembro.get_genero_display }}
                {% else %}
                    —
                {% endif %}
            </span>
        </div>

        <div class="data-item">
            <span class="label">Fecha de nacimiento</span>
            <span class="value">
                {% if miembro.fecha_nacimiento %}
                    {{ miembro.fecha_nacimiento|date:"d/m/Y" }}
                {% else %} — {% endif %}
            </span>
        </div>

        <div class="data-item">
            <span class="label">Edad</span>
            <span class="value">
                {% if miembro.calcular_edad %}
                    {{ miembro.calcular_edad }} años
                {% else %}
                    —
                {% endif %}
            </span>
        </div>

        <div class="data-item">
            <span class="label">Dirección</span>
            <span class="value">
                {{ miembro.direccion|default:"—" }}
            </span>
        </div>

        <div class="data-item">
            <span class="label">Teléfono</span>
            <span class="value">
                {{ miembro.telefono|default:"—" }}
            </span>
        </div>

        <div class="data-item">
            <span class="label">WhatsApp</span>
            <span class="value">
                {% if miembro.telefono %}
                    <a href="https://wa.me/{{ miembro.telefono|cut:' '|cut:'-' }}"
                       target="_blank">
                        {{ miembro.telefono }}
                    </a>
                {% else %}
                    —
                {% endif %}
            </span>
        </div>

        <div class="data-item">
            <span class="label">Correo</span>
            <span class="value">
                {{ miembro.email|default:"—" }}
            </span>
        </div>

    </div>

    <h2 class="section-title" style="margin-top:32px;">Datos espirituales</h2>

    <div class="data-grid">

        <div class="data-item">
            <span class="label">Fecha de conversión</span>
            <span class="value">
                {% if miembro.fecha_conversion %}
                    {{ miembro.fecha_conversion|date:"d/m/Y" }}
                {% else %}
                    —
                {% endif %}
            </span>
        </div>

        <div class="data-item">
            <span class="label">Fecha de registro</span>
            <span class="value">
                {{ miembro.fecha_creacion|date:"d/m/Y" }}
            </span>
        </div>

        <div class="data-item data-item-full">
            <span class="label">Notas</span>
            <span class="value">
                {{ miembro.notas|default:"—" }}
            </span>
        </div>

    </div>

</section>

<style>
/* RESPONSIVE */
.data-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 12px;
    margin-top: 12px;
}

.data-item {
    background: #f9fafb;
    padding: 12px;
    border-radius: 6px;
}

.label {
    display: block;
    font-size: 11px;
    color: #6b7280;
    margin-bottom: 4px;
}

.value {
    font-size: 14px;
    font-weight: 600;
    color: #111827;
}

.data-item-full {
    grid-column: 1 / -1;
}

/* IMPRESIÓN */
@media print {
    .no-print,
    .topbar,
    .main-nav,
    .footer {
        display: none !important;
    }

    .page-section {
        box-shadow: none;
        padding: 0;
    }

    .data-item {
        background: none;
        border: 1px solid #ddd;
    }
}
</style>

{% endblock %}
