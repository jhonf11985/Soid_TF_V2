{% extends 'miembros_app/base_miembros.html' %}

{% block title %}{{ miembro.nombres }} {{ miembro.apellidos }}{% endblock %}

{% block miembros_content %}

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     BARRA DE CONTROL SUPERIOR (Estilo Odoo)
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="odoo-control-bar">
    <div class="odoo-control-left">
        <a href="{% url 'miembros_app:lista' %}" class="odoo-btn odoo-btn-secondary">
            <span class="material-icons">arrow_back</span>
        </a>
        
        <div class="odoo-breadcrumb">
            <a href="{% url 'miembros_app:lista' %}" class="odoo-breadcrumb-link">Miembros</a>
            <span class="material-icons">chevron_right</span>
            <span class="odoo-breadcrumb-current">{{ miembro.codigo_miembro }}</span>
        </div>
    </div>

    <div class="odoo-control-right">
        <a href="{% url 'miembros_app:miembro_enviar_ficha_email' miembro.pk %}" class="odoo-btn odoo-btn-secondary">
            <span class="material-icons">mail</span>
            Enviar
        </a>
{% if MODULOS_ACTIVOS.codigoqr %}
<a href="{% url 'codigo_qr:por_miembro' miembro.pk %}"
   class="odoo-btn odoo-btn-secondary"
   target="_blank">
  <span class="material-icons">qr_code_2</span>
  QR
</a>
{% endif %}




        <a href="{% url 'miembros_app:ficha' miembro.pk %}" class="odoo-btn odoo-btn-secondary">
            <span class="material-icons">description</span>
            Ficha
        </a>
{% if miembro.activo and can_dar_salida %}
    <a href="{% url 'miembros_app:salida_form' miembro.pk %}"
       class="odoo-btn odoo-btn-secondary"
       style="border-color:#f1c40f;">
        <span class="material-icons">person_off</span>
        Dar salida
    </a>
{% endif %}

        <a href="{% url 'miembros_app:editar' miembro.pk %}" class="odoo-btn odoo-btn-primary">
            <span class="material-icons">edit</span>
            Editar
        </a>
    </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     CONTENIDO PRINCIPAL (Layout estilo Odoo Form)
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="odoo-detail-container">

    <!-- HEADER: Avatar + Nombre + Info r√°pida -->
    <div class="odoo-detail-header">
        
        <!-- Avatar -->
        <div class="odoo-detail-avatar" style="background: {% if miembro.genero == 'M' %}#3b82f6{% else %}#ec4899{% endif %};">
            {% if miembro.foto %}
                <img src="{{ miembro.foto.url }}" alt="{{ miembro.nombres }}">
            {% else %}
                <span class="odoo-avatar-initial">{{ miembro.nombres|slice:":1"|upper }}</span>
            {% endif %}
        </div>

        <!-- Info principal -->
        <div class="odoo-detail-info">
            <h1 class="odoo-detail-name">
    {{ miembro.nombres }} {{ miembro.apellidos }}

    {% if miembro.activo and miembro.estado_miembro != "activo" %}
        {% if miembro.origen_reingreso == "descarriado" %}
            <span class="reingreso-pill reingreso-reconciliado">
                (Reconciliado)
            </span>
        {% elif miembro.origen_reingreso == "traslado" %}
            <span class="reingreso-pill reingreso-traslado">
                (Reintegrado)
            </span>
        {% endif %}
    {% endif %}
</h1>

            
            <div class="odoo-detail-badges">
                {% if not miembro.activo %}
                    <span class="odoo-badge odoo-badge-danger">Inactivo</span>
                {% endif %}
                
                {% if miembro.estado_miembro %}
                    <span class="odoo-badge odoo-badge-{% if miembro.estado_miembro == 'activo' %}success{% elif miembro.estado_miembro == 'pasivo' %}warning{% elif miembro.estado_miembro == 'disciplina' or miembro.estado_miembro == 'descarriado' %}danger{% else %}info{% endif %}">
                        {{ miembro.get_estado_miembro_display }}
                    </span>
                {% endif %}
                
                {% if miembro.edad and miembro.edad < EDAD_MINIMA_MIEMBRO_OFICIAL %}
                    <span class="odoo-badge odoo-badge-neutral">Ni√±o(a)</span>
                {% endif %}
                
                {% if miembro.edad %}
                    <span class="odoo-badge odoo-badge-info">{{ miembro.edad }} a√±os</span>
                {% endif %}
                
                {% if miembro.categoria_edad %}
                    <span class="odoo-badge odoo-badge-neutral">{{ miembro.get_categoria_edad_display }}</span>
                {% endif %}
                
                {% if miembro.bautizado_confirmado %}
                    <span class="odoo-badge odoo-badge-success">Bautizado</span>
                {% endif %}
            </div>

            <!-- Quick info -->
            <div class="odoo-detail-quick">
                {% if miembro.email %}
                <div class="odoo-quick-item">
                    <span class="material-icons">mail</span>
                    <a href="mailto:{{ miembro.email }}">{{ miembro.email }}</a>
                </div>
                {% endif %}
                {% if miembro.telefono %}
                <div class="odoo-quick-item">
                    <span class="material-icons">phone</span>
                    <span>{{ miembro.telefono }}</span>
                </div>
                {% endif %}
                {% if miembro.whatsapp %}
                <div class="odoo-quick-item">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#25d366">
                        <path d="M12 2C6.486 2 2 6.486 2 12c0 1.86.507 3.599 1.387 5.106L2 22l5.043-1.356A9.93 9.93 0 0 0 12 22c5.514 0 10-4.486 10-10S17.514 2 12 2z"/>
                    </svg>
                    <a href="https://wa.me/{{ miembro.whatsapp|cut:' '|cut:'-' }}" target="_blank">{{ miembro.whatsapp }}</a>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- C√≥digo del miembro -->
        <div class="odoo-detail-code">
            <span class="odoo-code-label">C√≥digo</span>
            <span class="odoo-code-value">{{ miembro.codigo_miembro }}</span>
        </div>
    </div>

    <!-- SITUACI√ìN EN LA IGLESIA (Card destacada) -->
    <div class="odoo-situation-card {% if not miembro.activo %}odoo-situation-inactive{% elif miembro.estado_miembro == 'disciplina' or miembro.estado_miembro == 'descarriado' %}odoo-situation-warning{% else %}odoo-situation-ok{% endif %}">
        <div class="odoo-situation-icon">
            {% if not miembro.activo %}
                <span class="material-icons">person_off</span>
            {% elif miembro.estado_miembro == 'disciplina' %}
                <span class="material-icons">gavel</span>
            {% elif miembro.estado_miembro == 'descarriado' %}
                <span class="material-icons">heart_broken</span>
            {% elif miembro.estado_miembro == 'observacion' %}
                <span class="material-icons">visibility</span>
            {% elif miembro.es_miembro_oficial %}
                <span class="material-icons">verified</span>
            {% else %}
                <span class="material-icons">person</span>
            {% endif %}
        </div>
        <div class="odoo-situation-content">
            <strong>Situaci√≥n actual en la iglesia</strong>
            
            {% if not miembro.activo %}
                <p>Actualmente no est√° activo en la membres√≠a oficial.</p>
                {% if miembro.razon_salida %}
                    <p><span class="odoo-sit-label">Raz√≥n:</span> {{ miembro.razon_salida }}</p>
                {% endif %}
                {% if miembro.fecha_salida %}
                    <p><span class="odoo-sit-label">Fecha de salida:</span> {{ miembro.fecha_salida|date:"d/m/Y" }}</p>
                {% endif %}
                {% if miembro.comentario_salida %}
                    <p><span class="odoo-sit-label">Comentario:</span> {{ miembro.comentario_salida }}</p>
                {% endif %}
                
            {% elif miembro.edad and miembro.edad < EDAD_MINIMA_MIEMBRO_OFICIAL %}
                <p>Menor de {{ EDAD_MINIMA_MIEMBRO_OFICIAL }} a√±os. Registrado como ni√±o(a) de la congregaci√≥n, a√∫n no forma parte de la membres√≠a oficial.</p>
                
            {% else %}
                {% if miembro.es_miembro_oficial %}
                    {% if miembro.estado_miembro == "pasivo" %}
                        <p>Forma parte de la membres√≠a oficial, pero est√° en estado <strong>pasivo</strong> y no participa activamente.</p>
                    {% elif miembro.estado_miembro == "observacion" %}
                        <p>Miembro oficial en <strong>observaci√≥n pastoral</strong> con restricciones para participar en algunas √°reas.</p>
                    {% elif miembro.estado_miembro == "disciplina" %}
                        <p>Miembro oficial bajo <strong>disciplina</strong>. No puede participar en ministerios ni servicios.</p>
                    {% elif miembro.estado_miembro == "descarriado" %}
                        <p>Miembro <strong>descarriado</strong>: no se congrega regularmente. Se mantiene en registro para seguimiento pastoral.</p>
                    {% elif miembro.estado_miembro == "catecumeno" %}
                        <p><strong>Catec√∫meno</strong>: en proceso de preparaci√≥n antes de ser recibido como miembro oficial.</p>
                    {% else %}
                        <p>Forma parte de la <strong>membres√≠a oficial</strong> y puede participar normalmente en ministerios y actividades.</p>
                    {% endif %}
                {% else %}
                    {% if miembro.estado_miembro == "catecumeno" %}
                        <p><strong>Catec√∫meno</strong>: asistiendo y en preparaci√≥n para ser recibido como miembro oficial.</p>
                    {% else %}
                        <p>Se congrega en la iglesia, pero a√∫n no forma parte de la <strong>membres√≠a oficial</strong>.</p>
                    {% endif %}
                {% endif %}
            {% endif %}
        </div>
    </div>

    <!-- TABS DE INFORMACI√ìN -->
    <div class="odoo-detail-tabs">
        <button type="button" class="odoo-tab active" data-tab="personal">
            <span class="material-icons">person</span>
            Personal
        </button>
        <button type="button" class="odoo-tab" data-tab="contacto">
            <span class="material-icons">contact_phone</span>
            Contacto
        </button>
        <button type="button" class="odoo-tab" data-tab="membresia">
            <span class="material-icons">card_membership</span>
            Membres√≠a
        </button>
        <button type="button" class="odoo-tab" data-tab="ministerial">
            <span class="material-icons">school</span>
            Formaci√≥n
        </button>
        <button type="button" class="odoo-tab" data-tab="salud">
            <span class="material-icons">medical_services</span>
            Salud
        </button>
        <button type="button" class="odoo-tab" data-tab="trabajo">
            <span class="material-icons">work</span>
            Trabajo
        </button>
        <button type="button" class="odoo-tab" data-tab="familia">
            <span class="material-icons">family_restroom</span>
            Familia
        </button>

        <button type="button" class="odoo-tab" data-tab="privado">
        <span class="material-icons">lock</span>
        Privado
    </button>
        {% if MODULOS_ACTIVOS.Finanzas %}
        <button type="button" class="odoo-tab" data-tab="finanzas">
            <span class="material-icons">account_balance_wallet</span>
            Historial Financiero
        </button>
        {% endif %}
        {% if MODULOS_ACTIVOS.Estructura or MODULOS_ACTIVOS.Unidad or MODULOS_ACTIVOS.Unidades %}
        <button type="button" class="odoo-tab" data-tab="unidades">
        <span class="material-icons">apartment</span>
        Unidades
        </button>
        {% endif %}



        <button type="button" class="odoo-tab" data-tab="otros">
            <span class="material-icons">more_horiz</span>
            Otros
        </button>
    </div>

    <!-- CONTENIDO DE TABS -->
    <div class="odoo-tab-contents">
        
        <!-- TAB: Personal -->
        <div class="odoo-tab-content active" id="tab-personal">
            <div class="odoo-fields-grid">
                <div class="odoo-field">
                    <label>Fecha de nacimiento</label>
                    <span>{% if miembro.fecha_nacimiento %}{{ miembro.fecha_nacimiento|date:"d/m/Y" }}{% else %}‚Äî{% endif %}</span>
                </div>
                <div class="odoo-field">
                    <label>Lugar de nacimiento</label>
                    <span>{{ miembro.lugar_nacimiento|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field">
                    <label>G√©nero</label>
                    <span>{{ miembro.get_genero_display|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field">
                <label>Estado civil</label>
                <span>{% if miembro.estado_civil %}{{ miembro.estado_civil }}{% else %}‚Äî{% endif %}</span>
                </div>

                <div class="odoo-field">
                    <label>Nacionalidad</label>
                    <span>{{ miembro.nacionalidad|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field">
                    <label>C√©dula</label>
                    <span>{{ miembro.cedula|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field">
                    <label>Pasaporte</label>
                    <span>{{ miembro.pasaporte|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field">
                <label>Nivel educativo</label>
                <span>{% if miembro.nivel_educativo %}{{ miembro.nivel_educativo }}{% else %}‚Äî{% endif %}</span>
                </div>

                <div class="odoo-field">
                    <label>Profesi√≥n</label>
                    <span>{{ miembro.profesion|default:"‚Äî" }}</span>
                </div>
            </div>
        </div>

        <!-- TAB: Contacto -->
        <div class="odoo-tab-content" id="tab-contacto">
            <div class="odoo-fields-grid">
                <div class="odoo-field">
                    <label>Tel√©fono principal</label>
                    <span>{{ miembro.telefono|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field">
                    <label>Tel√©fono secundario</label>
                    <span>{{ miembro.telefono_secundario|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field">
                    <label>WhatsApp</label>
                    <span>
                        {% if miembro.whatsapp %}
                            <a href="https://wa.me/{{ miembro.whatsapp|cut:' '|cut:'-' }}" target="_blank">{{ miembro.whatsapp }}</a>
                        {% else %}‚Äî{% endif %}
                    </span>
                </div>
                <div class="odoo-field">
                    <label>Correo electr√≥nico</label>
                    <span>
                        {% if miembro.email %}
                            <a href="mailto:{{ miembro.email }}">{{ miembro.email }}</a>
                        {% else %}‚Äî{% endif %}
                    </span>
                </div>
                <div class="odoo-field odoo-field-full">
                    <label>Direcci√≥n</label>
                    <span>
                        {% if miembro.direccion %}
                            {{ miembro.direccion }}
                            {% if miembro.sector %}, {{ miembro.sector }}{% endif %}
                            {% if miembro.ciudad %}, {{ miembro.ciudad }}{% endif %}
                            {% if miembro.provincia %}, {{ miembro.provincia }}{% endif %}
                            {% if miembro.codigo_postal %} ({{ miembro.codigo_postal }}){% endif %}
                        {% else %}‚Äî{% endif %}
                    </span>
                </div>
            </div>
        </div>

        <!-- TAB: Membres√≠a -->
        <div class="odoo-tab-content" id="tab-membresia">
            <div class="odoo-fields-grid">
                <div class="odoo-field">
                    <label>Estado del miembro</label>
                    <span>
                        {% if miembro.estado_miembro %}
                            <span class="odoo-badge odoo-badge-{% if miembro.estado_miembro == 'activo' %}success{% elif miembro.estado_miembro == 'pasivo' %}warning{% else %}info{% endif %}">
                                {{ miembro.get_estado_miembro_display }}
                            </span>
                        {% else %}‚Äî{% endif %}
                    </span>
                </div>
                <div class="odoo-field">
                    <label>Categor√≠a</label>
                    <span>
                        {% if miembro.categoria_edad %}
                            {{ miembro.get_categoria_edad_display }}
                        {% else %}
                            ‚Äî
                        {% endif %}
                    </span>
                </div>

                <div class="odoo-field">
                    <label>Fecha de ingreso</label>
                    <span>{% if miembro.fecha_ingreso_iglesia %}{{ miembro.fecha_ingreso_iglesia|date:"d/m/Y" }}{% else %}‚Äî{% endif %}</span>
                </div>
                <div class="odoo-field">
                    <label>Iglesia anterior</label>
                    <span>{{ miembro.iglesia_anterior|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field">
                    <label>Fecha de conversi√≥n</label>
                    <span>{% if miembro.fecha_conversion %}{{ miembro.fecha_conversion|date:"d/m/Y" }}{% else %}‚Äî{% endif %}</span>
                </div>
                <div class="odoo-field">
                    <label>Fecha de bautismo</label>
                    <span>{% if miembro.fecha_bautismo %}{{ miembro.fecha_bautismo|date:"d/m/Y" }}{% else %}‚Äî{% endif %}</span>
                </div>
                <div class="odoo-field">
                    <label>Bautizado confirmado</label>
                    <span>
                        {% if miembro.bautizado_confirmado %}
                            <span class="odoo-badge odoo-badge-success">S√≠</span>
                        {% else %}
                            <span class="odoo-badge odoo-badge-neutral">No</span>
                        {% endif %}
                    </span>
                </div>
                <div class="odoo-field">
                    <label>Mentor</label>
                    <span>{{ miembro.mentor|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field">
                    <label>L√≠der de c√©lula</label>
                    <span>{{ miembro.lider_celula|default:"‚Äî" }}</span>
                </div>
            </div>
        </div>

        <!-- TAB: Formaci√≥n Ministerial -->
        <div class="odoo-tab-content" id="tab-ministerial">
            
            <!-- Secci√≥n: Rol Ministerial -->
            <div class="odoo-detail-section">
                <div class="odoo-section-header">
                    <span class="material-icons">badge</span>
                    <span>Rol ministerial</span>
                </div>
                <div class="odoo-fields-grid">
                    <div class="odoo-field">
                        <label>Rol</label>
                        <span>
                            {% if miembro.rol_ministerial %}
                                {{ miembro.get_rol_ministerial_display }}
                            {% else %}‚Äî{% endif %}
                        </span>
                    </div>
                    <div class="odoo-field">
                        <label>Estado ministerial</label>
                        <span>
                            {% if miembro.estado_ministerial %}
                                <span class="odoo-badge odoo-badge-{% if miembro.estado_ministerial == 'activo' %}success{% elif miembro.estado_ministerial == 'pausa' %}warning{% else %}neutral{% endif %}">
                                    {{ miembro.get_estado_ministerial_display }}
                                </span>
                            {% else %}‚Äî{% endif %}
                        </span>
                    </div>
                    <div class="odoo-field">
                        <label>Obrero ordenado</label>
                        <span>
                            {% if miembro.obrero_ordenado %}
                                <span class="odoo-badge odoo-badge-success">S√≠</span>
                            {% else %}
                                <span class="odoo-badge odoo-badge-neutral">No</span>
                            {% endif %}
                        </span>
                    </div>
                </div>
            </div>

            <!-- Secci√≥n: Credenciales Ministeriales -->
            <div class="odoo-detail-section">
                <div class="odoo-section-header">
                    <span class="material-icons">card_membership</span>
                    <span>Credenciales ministeriales</span>
                </div>
                <div class="odoo-fields-grid">
                    <div class="odoo-field">
                        <label>Tiene credenciales</label>
                        <span>
                            {% if miembro.tiene_credenciales %}
                                <span class="odoo-badge odoo-badge-success">S√≠</span>
                            {% else %}
                                <span class="odoo-badge odoo-badge-neutral">No</span>
                            {% endif %}
                        </span>
                    </div>
                    {% if miembro.tiene_credenciales %}
                    <div class="odoo-field">
                        <label>N√∫mero de credencial</label>
                        <span>{{ miembro.numero_credencial|default:"‚Äî" }}</span>
                    </div>
                    <div class="odoo-field">
                        <label>Fecha de emisi√≥n</label>
                        <span>{% if miembro.credencial_fecha_emision %}{{ miembro.credencial_fecha_emision|date:"d/m/Y" }}{% else %}‚Äî{% endif %}</span>
                    </div>
                    <div class="odoo-field">
                        <label>Fecha de vencimiento</label>
                        <span>
                            {% if miembro.credencial_fecha_vencimiento %}
                                {{ miembro.credencial_fecha_vencimiento|date:"d/m/Y" }}
                                {% now "Y-m-d" as today %}
                                {% if miembro.credencial_fecha_vencimiento|date:"Y-m-d" < today %}
                                    <span class="odoo-badge odoo-badge-danger" style="margin-left: 6px;">Vencida</span>
                                {% endif %}
                            {% else %}‚Äî{% endif %}
                        </span>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- Secci√≥n: Formaci√≥n Teol√≥gica -->
            <div class="odoo-detail-section">
                <div class="odoo-section-header">
                    <span class="material-icons">school</span>
                    <span>Formaci√≥n teol√≥gica</span>
                </div>
                <div class="odoo-fields-grid">
                    <div class="odoo-field">
                        <label>Nivel de formaci√≥n</label>
                        <span>
                            {% if miembro.nivel_formacion %}
                                {{ miembro.get_nivel_formacion_display }}
                            {% else %}‚Äî{% endif %}
                        </span>
                    </div>
                    <div class="odoo-field">
                        <label>√Årea de formaci√≥n</label>
                        <span>
                            {% if miembro.area_formacion %}
                                {{ miembro.get_area_formacion_display }}
                            {% else %}‚Äî{% endif %}
                        </span>
                    </div>
                    <div class="odoo-field">
                        <label>D√≥nde estudi√≥</label>
                        <span>{{ miembro.donde_estudio_teologia|default:"‚Äî" }}</span>
                    </div>
                    <div class="odoo-field">
                        <label>Preparaci√≥n teol√≥gica</label>
                        <span>{{ miembro.preparacion_teologica|default:"‚Äî" }}</span>
                    </div>
                    <div class="odoo-field odoo-field-full">
                        <label>Cursos y certificaciones</label>
                        <span>{{ miembro.cursos_certificaciones|default:"‚Äî"|linebreaksbr }}</span>
                    </div>
                </div>
            </div>

            <!-- Secci√≥n: Vida Espiritual -->
            <div class="odoo-detail-section">
                <div class="odoo-section-header">
                    <span class="material-icons">local_fire_department</span>
                    <span>Vida espiritual</span>
                </div>
                <div class="odoo-fields-grid">
                    <div class="odoo-field">
                        <label>Bautizado en el Esp√≠ritu Santo</label>
                        <span>
                            {% if miembro.bautizado_espiritu_santo %}
                                <span class="odoo-badge odoo-badge-success">S√≠</span>
                            {% else %}
                                <span class="odoo-badge odoo-badge-neutral">No</span>
                            {% endif %}
                        </span>
                    </div>
                </div>
            </div>

            <!-- Secci√≥n: Misi√≥n -->
            <div class="odoo-detail-section">
                <div class="odoo-section-header">
                    <span class="material-icons">public</span>
                    <span>Misi√≥n</span>
                </div>
                <div class="odoo-fields-grid">
                    <div class="odoo-field">
                        <label>Misionero activo</label>
                        <span>
                            {% if miembro.misionero_activo %}
                                <span class="odoo-badge odoo-badge-success">S√≠</span>
                            {% else %}
                                <span class="odoo-badge odoo-badge-neutral">No</span>
                            {% endif %}
                        </span>
                    </div>
                    {% if miembro.misionero_activo %}
                    <div class="odoo-field">
                        <label>Tipo de misi√≥n</label>
                        <span>
                            {% if miembro.mision_tipo %}
                                {{ miembro.get_mision_tipo_display }}
                            {% else %}‚Äî{% endif %}
                        </span>
                    </div>
                    <div class="odoo-field">
                        <label>Pa√≠s de misi√≥n</label>
                        <span>{{ miembro.mision_pais|default:"‚Äî" }}</span>
                    </div>
                    <div class="odoo-field">
                        <label>Ciudad de misi√≥n</label>
                        <span>{{ miembro.mision_ciudad|default:"‚Äî" }}</span>
                    </div>
                    <div class="odoo-field">
                        <label>Fecha de inicio</label>
                        <span>{% if miembro.mision_fecha_inicio %}{{ miembro.mision_fecha_inicio|date:"d/m/Y" }}{% else %}‚Äî{% endif %}</span>
                    </div>
                    <div class="odoo-field">
                        <label>Fecha de fin</label>
                        <span>{% if miembro.mision_fecha_fin %}{{ miembro.mision_fecha_fin|date:"d/m/Y" }}{% else %}‚Äî{% endif %}</span>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- TAB: Salud -->
        <div class="odoo-tab-content" id="tab-salud">
            <div class="odoo-fields-grid">
                <div class="odoo-field">
                    <label>Contacto de emergencia</label>
                    <span>{{ miembro.contacto_emergencia_nombre|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field">
                    <label>Tel√©fono de emergencia</label>
                    <span>{{ miembro.contacto_emergencia_telefono|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field">
                    <label>Relaci√≥n</label>
                    <span>{{ miembro.contacto_emergencia_relacion|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field">
                    <label>Tipo de sangre</label>
                    <span>{{ miembro.tipo_sangre|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field odoo-field-full">
                    <label>Alergias</label>
                    <span>{{ miembro.alergias|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field odoo-field-full">
                    <label>Condiciones m√©dicas</label>
                    <span>{{ miembro.condiciones_medicas|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field odoo-field-full">
                    <label>Medicamentos</label>
                    <span>{{ miembro.medicamentos|default:"‚Äî" }}</span>
                </div>
            </div>
        </div>

        <!-- TAB: Trabajo -->
        <div class="odoo-tab-content" id="tab-trabajo">
            <div class="odoo-fields-grid">
                <div class="odoo-field">
                    <label>Empleador</label>
                    <span>{{ miembro.empleador|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field">
                    <label>Puesto</label>
                    <span>{{ miembro.puesto|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field">
                    <label>Tel√©fono del trabajo</label>
                    <span>{{ miembro.telefono_trabajo|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field odoo-field-full">
                    <label>Direcci√≥n del trabajo</label>
                    <span>{{ miembro.direccion_trabajo|default:"‚Äî" }}</span>
                </div>
            </div>
        </div>

  <!-- TAB: Familia -->
<!-- TAB: Familia -->
<div class="odoo-tab-content" id="tab-familia">

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         üë®‚Äçüë©‚Äçüëß‚Äçüë¶ MI FAMILIA NUCLEAR (C√≥nyuge + Hijos)
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="odoo-detail-section" style="margin-bottom:24px;">
        <div class="odoo-section-header">
            <span class="material-icons">favorite</span>
            <span>Mi familia</span>
        </div>

        {% if familia_nuclear %}
            <div class="familia-cards-grid">
                {% for rel in familia_nuclear %}
                <div class="familia-card familia-card--nuclear">
                    <div class="familia-card__avatar">
                        {% if rel.otro.foto %}
                            <img src="{{ rel.otro.foto.url }}" alt="{{ rel.otro.nombres }}">
                        {% else %}
                            <span class="material-icons">person</span>
                        {% endif %}
                    </div>
                    <div class="familia-card__info">
                        <a href="{% url 'miembros_app:detalle' rel.otro.pk %}" class="familia-card__nombre">
                            {{ rel.otro.nombres }} {{ rel.otro.apellidos }}
                        </a>
                        <span class="familia-card__relacion">
                            {{ rel.tipo_label }}
                            {% if rel.es_inferida %}
                                <span class="badge-inferido" title="{{ rel.notas }}">‚óè</span>
                            {% endif %}
                        </span>
                        {% if rel.vive_junto %}
                            <span class="familia-card__tag">
                                <span class="material-icons" style="font-size:12px;">home</span>
                                Vive junto
                            </span>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="odoo-empty-subtle">No hay c√≥nyuge ni hijos registrados.</p>
        {% endif %}
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         üë®‚Äçüë©‚Äçüë¶ MIS PADRES Y HERMANOS
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="odoo-detail-section" style="margin-bottom:24px;">
        <div class="odoo-section-header">
            <span class="material-icons">family_restroom</span>
            <span>Padres y hermanos</span>
        </div>

        {% if familia_origen %}
            <div class="familia-cards-grid">
                {% for rel in familia_origen %}
                <div class="familia-card familia-card--origen">
                    <div class="familia-card__avatar">
                        {% if rel.otro.foto %}
                            <img src="{{ rel.otro.foto.url }}" alt="{{ rel.otro.nombres }}">
                        {% else %}
                            <span class="material-icons">person</span>
                        {% endif %}
                    </div>
                    <div class="familia-card__info">
                        <a href="{% url 'miembros_app:detalle' rel.otro.pk %}" class="familia-card__nombre">
                            {{ rel.otro.nombres }} {{ rel.otro.apellidos }}
                        </a>
                        <span class="familia-card__relacion">
                            {{ rel.tipo_label }}
                            {% if rel.es_inferida %}
                                <span class="badge-inferido" title="{{ rel.notas }}">‚óè</span>
                            {% endif %}
                        </span>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="odoo-empty-subtle">No hay padres ni hermanos registrados.</p>
        {% endif %}
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         üå≥ FAMILIA EXTENDIDA (Abuelos, T√≠os, Primos, Sobrinos, Nietos)
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    {% if familia_extendida %}
    <div class="odoo-detail-section" style="margin-bottom:24px;">
        <div class="odoo-section-header">
            <span class="material-icons">account_tree</span>
            <span>Familia extendida</span>
        </div>

        <div class="familia-lista">
            {% for rel in familia_extendida %}
            <div class="familia-lista__item">
                <div class="familia-lista__avatar">
                    {% if rel.otro.foto %}
                        <img src="{{ rel.otro.foto.url }}" alt="{{ rel.otro.nombres }}">
                    {% else %}
                        <span class="material-icons">person</span>
                    {% endif %}
                </div>
                <div class="familia-lista__info">
                    <a href="{% url 'miembros_app:detalle' rel.otro.pk %}">
                        {{ rel.otro.nombres }} {{ rel.otro.apellidos }}
                    </a>
                </div>
                <div class="familia-lista__relacion">
                    <span class="odoo-badge odoo-badge-neutral">
                        {{ rel.tipo_label }}
                    </span>
                    {% if rel.es_inferida %}
                        <span class="odoo-badge odoo-badge-info" title="{{ rel.notas }}">Inferido</span>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         üíç FAMILIA POL√çTICA (Suegros, Cu√±ados, Yernos, Consuegros)
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    {% if familia_politica %}
    <div class="odoo-detail-section" style="margin-bottom:24px;">
        <div class="odoo-section-header">
            <span class="material-icons">groups</span>
            <span>Familia pol√≠tica</span>
        </div>

        <div class="familia-lista">
            {% for rel in familia_politica %}
            <div class="familia-lista__item">
                <div class="familia-lista__avatar">
                    {% if rel.otro.foto %}
                        <img src="{{ rel.otro.foto.url }}" alt="{{ rel.otro.nombres }}">
                    {% else %}
                        <span class="material-icons">person</span>
                    {% endif %}
                </div>
                <div class="familia-lista__info">
                    <a href="{% url 'miembros_app:detalle' rel.otro.pk %}">
                        {{ rel.otro.nombres }} {{ rel.otro.apellidos }}
                    </a>
                </div>
                <div class="familia-lista__relacion">
                    <span class="odoo-badge odoo-badge-neutral">
                        {{ rel.tipo_label }}
                    </span>
                    {% if rel.es_inferida %}
                        <span class="odoo-badge odoo-badge-info" title="{{ rel.notas }}">Inferido</span>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         üè† MI HOGAR (Sistema de hogares)
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    {% if hogar_principal %}
    <div class="odoo-detail-section" style="margin-bottom:24px;">
        <div class="odoo-section-header">
            <span class="material-icons">home</span>
            <span>Mi hogar</span>
        </div>

        <div style="margin-bottom:8px;">
            <strong>{{ hogar_principal.nombre }}</strong>
        </div>

        <ul style="margin:0; padding-left:16px;">
            {% for hm in miembros_hogar %}
                <li>
                    <strong>{{ hm.miembro.nombres }} {{ hm.miembro.apellidos }}</strong>
                    <span style="opacity:.7;">‚Äî {{ hm.get_rol_display }}</span>
                    {% if hm.es_principal %}
                        <span style="opacity:.6;">(principal)</span>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         üå≤ CLAN FAMILIAR
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    {% if clan_familiar %}
    <div class="odoo-detail-section">
        <div class="odoo-section-header">
            <span class="material-icons">diversity_3</span>
            <span>Clan familiar</span>
        </div>

        <div style="margin-bottom:8px;">
            <strong>{{ clan_familiar.nombre }}</strong>
        </div>

        {% for hogar in hogares_clan %}
            <div style="margin-bottom:14px; padding:10px; border:1px solid #eee; border-radius:8px;">
                <div style="font-weight:600; margin-bottom:6px;">
                    üè† {{ hogar.nombre }}
                </div>

                <ul style="margin:0; padding-left:16px;">
                    {% for hm in hogar.miembros.all %}
                        <li>
                            {{ hm.miembro.nombres }} {{ hm.miembro.apellidos }}
                            <span style="opacity:.7;">‚Äî {{ hm.get_rol_display }}</span>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         üìù MENSAJE SI NO HAY NADA
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    {% if not familia_nuclear and not familia_origen and not familia_extendida and not familia_politica %}
        <div class="odoo-empty-state">
            <span class="material-icons" style="font-size:48px; opacity:0.3;">family_restroom</span>
            <p>No hay familiares registrados para este miembro.</p>
            <a href="{% url 'miembros_app:editar' miembro.pk %}" class="odoo-btn odoo-btn-primary">
                <span class="material-icons">edit</span>
                Agregar familiares
            </a>
        </div>
    {% endif %}

</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     ESTILOS PARA LA SECCI√ìN DE FAMILIA
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<style>
/* Grid de tarjetas de familia */
.familia-cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 12px;
}

/* Tarjeta de familiar */
.familia-card {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    border-radius: 10px;
    background: #f8f9fa;
    border: 1px solid #e9ecef;
    transition: all 0.2s ease;
}

.familia-card:hover {
    background: #fff;
    border-color: #dee2e6;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

/* Variantes de color */
.familia-card--nuclear {
    background: linear-gradient(135deg, #fff5f5 0%, #fff 100%);
    border-color: #fed7d7;
}

.familia-card--nuclear:hover {
    border-color: #feb2b2;
}

.familia-card--origen {
    background: linear-gradient(135deg, #f0fff4 0%, #fff 100%);
    border-color: #c6f6d5;
}

.familia-card--origen:hover {
    border-color: #9ae6b4;
}

/* Avatar */
.familia-card__avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: #e9ecef;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    overflow: hidden;
}

.familia-card__avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.familia-card__avatar .material-icons {
    font-size: 24px;
    color: #adb5bd;
}

/* Info */
.familia-card__info {
    display: flex;
    flex-direction: column;
    gap: 2px;
    min-width: 0;
}

.familia-card__nombre {
    font-weight: 600;
    color: #212529;
    text-decoration: none;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.familia-card__nombre:hover {
    color: #495057;
    text-decoration: underline;
}

.familia-card__relacion {
    font-size: 13px;
    color: #6c757d;
    display: flex;
    align-items: center;
    gap: 4px;
}

.familia-card__tag {
    display: inline-flex;
    align-items: center;
    gap: 2px;
    font-size: 11px;
    color: #28a745;
    background: #d4edda;
    padding: 2px 6px;
    border-radius: 4px;
    margin-top: 4px;
}

/* Badge de inferido */
.badge-inferido {
    color: #17a2b8;
    font-size: 10px;
    cursor: help;
}

/* Lista de familia (para extendida y pol√≠tica) */
.familia-lista {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.familia-lista__item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 12px;
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #e9ecef;
}

.familia-lista__item:hover {
    background: #fff;
    border-color: #dee2e6;
}

.familia-lista__avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: #e9ecef;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    overflow: hidden;
}

.familia-lista__avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.familia-lista__avatar .material-icons {
    font-size: 18px;
    color: #adb5bd;
}

.familia-lista__info {
    flex: 1;
    min-width: 0;
}

.familia-lista__info a {
    color: #212529;
    text-decoration: none;
    font-weight: 500;
}

.familia-lista__info a:hover {
    text-decoration: underline;
}

.familia-lista__relacion {
    display: flex;
    align-items: center;
    gap: 6px;
    flex-shrink: 0;
}

/* Empty state */
.odoo-empty-state {
    text-align: center;
    padding: 40px 20px;
    color: #6c757d;
}

.odoo-empty-state p {
    margin: 16px 0;
}

.odoo-empty-subtle {
    color: #adb5bd;
    font-size: 14px;
    margin: 0;
    padding: 12px 0;
}

/* Responsive */
@media (max-width: 576px) {
    .familia-cards-grid {
        grid-template-columns: 1fr;
    }
    
    .familia-lista__item {
        flex-wrap: wrap;
    }
    
    .familia-lista__relacion {
        width: 100%;
        margin-top: 8px;
        padding-left: 48px;
    }
}
</style>

</div>

<!-- TAB: Privado -->
<div class="odoo-tab-content" id="tab-privado">

    {% if not privado_desbloqueado %}

        <div class="odoo-lock-box">
            <span class="material-icons odoo-lock-icon">lock</span>
            <h3>Informaci√≥n privada</h3>
            <p>Esta secci√≥n est√° protegida.</p>

            <input type="password"
                   id="privado-password"
                   class="odoo-input"
                   placeholder="Contrase√±a">

            <button type="button"
                    class="odoo-btn odoo-btn-primary"
                    onclick="desbloquearPrivado({{ miembro.pk }})">
                Desbloquear
            </button>

            <p id="privado-error" class="odoo-error" style="display:none;">
                Contrase√±a incorrecta
            </p>
        </div>

    {% else %}
    <div style="display:flex; justify-content:flex-end; margin-bottom:10px;">
    <button type="button" class="odoo-btn odoo-btn-secondary" onclick="bloquearPrivado({{ miembro.pk }})">
        <span class="material-icons" style="font-size:18px;">lock</span>
        Bloquear
    </button>
    </div>

        <!-- ‚úÖ CONTENIDO SOLO CUANDO EST√Å DESBLOQUEADO -->
        <div class="odoo-fields-grid">

            <div class="odoo-field">
                <label>Vivienda</label>
                <span>
                    {% if miembro.tipo_vivienda %}
                        {{ miembro.get_tipo_vivienda_display }}
                    {% else %}
                        ‚Äî
                    {% endif %}
                </span>
            </div>

            <div class="odoo-field">
                <label>Tiene veh√≠culo</label>
                <span>
                    {% if miembro.tiene_vehiculo %}
                        <span class="odoo-badge odoo-badge-success">S√≠</span>
                    {% else %}
                        <span class="odoo-badge odoo-badge-neutral">No</span>
                    {% endif %}
                </span>
            </div>

            <div class="odoo-field">
                <label>Tipo de veh√≠culo</label>
                <span>
                    {% if miembro.vehiculo_tipo %}
                        {{ miembro.get_vehiculo_tipo_display }}
                    {% else %}
                        ‚Äî
                    {% endif %}
                </span>
            </div>

            <div class="odoo-field">
                <label>Marca</label>
                <span>{{ miembro.vehiculo_marca|default:"‚Äî" }}</span>
            </div>

            <div class="odoo-field">
                <label>Placa</label>
                <span>{{ miembro.vehiculo_placa|default:"‚Äî" }}</span>
            </div>

            <div class="odoo-field">
                <label>Situaci√≥n econ√≥mica</label>
                <span>
                    {% if miembro.situacion_economica %}
                        {{ miembro.get_situacion_economica_display }}
                    {% else %}
                        ‚Äî
                    {% endif %}
                </span>
            </div>

        </div>

    {% endif %}

</div>



{% if MODULOS_ACTIVOS.Finanzas %}
<!-- TAB: Finanzas -->
<div class="odoo-tab-content" id="tab-finanzas">

    {% if not finanzas_desbloqueado %}
        <!-- üîí BLOQUEO HISTORIAL FINANCIERO -->
        <div class="odoo-lock-box">
            <span class="material-icons odoo-lock-icon">lock</span>
            <h3>Historial financiero</h3>
            <p>Esta informaci√≥n est√° protegida.</p>

            <input type="password"
                   id="finanzas-password"
                   class="odoo-input"
                   placeholder="Contrase√±a">

            <button type="button"
                    class="odoo-btn odoo-btn-primary"
                    onclick="desbloquearFinanzas({{ miembro.pk }})">
                Desbloquear
            </button>

            <p id="finanzas-error" class="odoo-error" style="display:none;">
                Contrase√±a incorrecta
            </p>
        </div>

    {% else %}
        <!-- üîì CONTENIDO FINANCIERO -->
        <div style="display:flex; justify-content:flex-end; margin-bottom:10px;">
            <button type="button"
                    class="odoo-btn odoo-btn-secondary"
                    onclick="bloquearFinanzas({{ miembro.pk }})">
                <span class="material-icons">lock</span>
                Bloquear
            </button>
        </div>

        <div class="odoo-fields-grid">
            <div class="odoo-field">
                <label>Total aportado</label>
                <span>RD$ {{ total_aportes|floatformat:2 }}</span>
            </div>
            <div class="odoo-field">
                <label>Movimientos</label>
                <span>{{ movimientos_financieros|length }}</span>
            </div>
        </div>

        {% if movimientos_financieros %}
            <div class="odoo-table-container" style="margin-top:12px;">
                <table class="odoo-table">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Tipo</th>
                            <th>Categor√≠a</th>
                            <th>Monto</th>
                            <th>Referencia</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for mov in movimientos_financieros %}
                        <tr>
                            <td>{{ mov.fecha|date:"d/m/Y" }}</td>
                            <td>{{ mov.get_tipo_display }}</td>
                            <td>{{ mov.categoria }}</td>
                            <td>RD$ {{ mov.monto|floatformat:2 }}</td>
                            <td>{{ mov.referencia|default:"‚Äî" }}</td>

                            <td style="text-align:right;">
                                {% if mov.es_transferencia %}
                                    <a class="odoo-icon-link"
                                       href="{% url 'finanzas_app:transferencia_detalle' mov.pk %}"
                                       title="Ver transferencia">
                                        <span class="material-icons" style="font-size:18px;">visibility</span>
                                    </a>
                                {% else %}
                                    {% if mov.tipo == 'ingreso' %}
                                        <a class="odoo-icon-link"
                                           href="{% url 'finanzas_app:ingreso_detalle' mov.pk %}"
                                           title="Ver ingreso">
                                            <span class="material-icons" style="font-size:18px;">visibility</span>
                                        </a>
                                    {% else %}
                                        <a class="odoo-icon-link"
                                           href="{% url 'finanzas_app:movimiento_editar' mov.pk %}"
                                           title="Ver egreso">
                                            <span class="material-icons" style="font-size:18px;">visibility</span>
                                        </a>
                                    {% endif %}
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <p class="odoo-muted" style="margin-top:10px;">
                No hay movimientos financieros registrados.
            </p>
        {% endif %}

    {% endif %}
</div>
{% endif %}


{% if MODULOS_ACTIVOS.Estructura or MODULOS_ACTIVOS.Unidad or MODULOS_ACTIVOS.Unidades %}
<!-- TAB: Unidades -->
<div class="odoo-tab-content" id="tab-unidades">

    <div class="odoo-fields-grid">
        <div class="odoo-field">
            <label>Total de unidades activas</label>
            <span>{{ unidades_total|default:"0" }}</span>
        </div>
    </div>

    {% if unidades_resumen %}
        <div class="odoo-table-container" style="margin-top:12px;">
            <table class="odoo-table">
                <thead>
                    <tr>
                        <th>Unidad</th>
                        <th>Rol</th>
                        <th style="width:160px;">Tipo</th>
                    </tr>
                </thead>
                <tbody>
                    {% for it in unidades_resumen %}
                        <tr>
                            <td><strong>{{ it.unidad }}</strong></td>
                            <td>{{ it.rol|default:"Miembro" }}</td>
                            <td>
                                <span class="odoo-badge odoo-badge-neutral">
                                    {{ it.tipo|default:"‚Äî" }}
                                </span>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p class="odoo-empty" style="margin-top:12px;">
            Este miembro no tiene asignaciones activas en unidades.
        </p>
    {% endif %}

</div>
{% endif %}




        
        <!-- TAB: Otros -->
        <div class="odoo-tab-content" id="tab-otros">
            <div class="odoo-fields-grid">
                <div class="odoo-field odoo-field-full">
                    <label>Intereses</label>
                    <span>{{ miembro.intereses|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field odoo-field-full">
                    <label>Otros intereses</label>
                    <span>{{ miembro.otros_intereses|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field odoo-field-full">
                    <label>Habilidades</label>
                    <span>{{ miembro.habilidades|default:"‚Äî" }}</span>
                </div>
                <div class="odoo-field odoo-field-full">
                    <label>Otras habilidades</label>
                    <span>{{ miembro.otras_habilidades|default:"‚Äî" }}</span>
                </div>
            </div>
            
            <div class="odoo-notes-section">
                <h3>Notas pastorales</h3>
                <div class="odoo-notes-content">
                    {{ miembro.notas|default:"Sin notas registradas."|linebreaks }}
                </div>
            </div>
        </div>

    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         TIMELINE DE EVENTOS (AUTOM√ÅTICO)
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="odoo-timeline">
        
        <!-- Header del Timeline -->
        <div class="odoo-timeline-header">
            <div class="odoo-timeline-title">
                <span class="material-icons">timeline</span>
                <span>Historial de eventos</span>
            </div>
            <span class="odoo-timeline-count">{{ miembro.timeline.count }} evento{{ miembro.timeline.count|pluralize:"s" }}</span>
        </div>

        <!-- Lista de eventos -->
        <div class="odoo-timeline-list">
            {% for evento in miembro.timeline.all|slice:":50" %}
            <div class="odoo-timeline-item">
                <!-- L√≠nea vertical -->
                <div class="odoo-timeline-line"></div>
                
                <!-- Icono del evento -->
                <div class="odoo-timeline-icon" style="background: {{ evento.color }};">
                    <span class="material-icons">{{ evento.icono }}</span>
                </div>
                
                <!-- Contenido -->
                <div class="odoo-timeline-content">
                    <div class="odoo-timeline-event-header">
                        <span class="odoo-timeline-event-type" style="color: {{ evento.color }};">
                            {{ evento.get_tipo_display }}
                        </span>
                        <span class="odoo-timeline-event-date">
                            {{ evento.fecha|date:"d M Y" }} ¬∑ {{ evento.fecha|time:"g:i a" }}
                        </span>
                    </div>
                    
                    <p class="odoo-timeline-description">{{ evento.descripcion }}</p>
                    
                    {% if evento.valor_anterior or evento.valor_nuevo %}
                    <div class="odoo-timeline-change">
                        {% if evento.valor_anterior %}
                        <span class="odoo-timeline-change-from">{{ evento.valor_anterior }}</span>
                        {% endif %}
                        {% if evento.valor_anterior and evento.valor_nuevo %}
                        <span class="material-icons odoo-timeline-arrow">arrow_forward</span>
                        {% endif %}
                        {% if evento.valor_nuevo %}
                        <span class="odoo-timeline-change-to">{{ evento.valor_nuevo }}</span>
                        {% endif %}
                    </div>
                    {% endif %}
                    
                    {% if evento.detalle %}
                    <p class="odoo-timeline-detail">{{ evento.detalle }}</p>
                    {% endif %}
                    
                    {% if evento.usuario %}
                    <div class="odoo-timeline-user">
                        <span class="material-icons">person</span>
                        {{ evento.usuario.get_full_name|default:evento.usuario.username }}
                    </div>
                    {% endif %}
                </div>
            </div>
            {% empty %}
            <div class="odoo-timeline-empty">
                <span class="material-icons">history</span>
                <div>
                    <p class="odoo-timeline-empty-title">Sin eventos registrados</p>
                    <p class="odoo-timeline-empty-sub">Los eventos del sistema aparecer√°n aqu√≠ autom√°ticamente.</p>
                </div>
            </div>
            {% endfor %}
        </div>
        
        {% if miembro.timeline.count > 50 %}
        <div class="odoo-timeline-more">
            <span>Mostrando los √∫ltimos 50 eventos de {{ miembro.timeline.count }}</span>
        </div>
        {% endif %}
    </div>


<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     ESTILOS DEL TIMELINE (agregar dentro del bloque <style> existente)
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->



</div>
<style>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   TIMELINE DE EVENTOS
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

.odoo-timeline {
    margin-top: 24px;
    background: #ffffff;
    border: 1px solid #e9ecef;
    border-radius: 12px;
    overflow: hidden;
}

.odoo-timeline-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
    border-bottom: 1px solid #e9ecef;
}

.odoo-timeline-title {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 15px;
    font-weight: 700;
    color: #212529;
}

.odoo-timeline-title .material-icons {
    font-size: 22px;
    color: #0097a7;
}

.odoo-timeline-count {
    font-size: 13px;
    color: #6c757d;
    background: #f1f3f4;
    padding: 4px 12px;
    border-radius: 20px;
}

/* Lista de eventos */
.odoo-timeline-list {
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 0;
}

/* Cada item del timeline */
.odoo-timeline-item {
    position: relative;
    display: flex;
    gap: 16px;
    padding-bottom: 24px;
}

.odoo-timeline-item:last-child {
    padding-bottom: 0;
}

.odoo-timeline-item:last-child .odoo-timeline-line {
    display: none;
}

/* L√≠nea vertical conectora */
.odoo-timeline-line {
    position: absolute;
    left: 17px;
    top: 36px;
    bottom: 0;
    width: 2px;
    background: #e9ecef;
}

/* Icono del evento */
.odoo-timeline-icon {
    flex-shrink: 0;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1;
}

.odoo-timeline-icon .material-icons {
    font-size: 18px;
    color: #ffffff;
}

/* Contenido del evento */
.odoo-timeline-content {
    flex: 1;
    min-width: 0;
    padding-top: 2px;
}

.odoo-timeline-event-header {
    display: flex;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
    margin-bottom: 4px;
}

.odoo-timeline-event-type {
    font-size: 12px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.odoo-timeline-event-date {
    font-size: 12px;
    color: #6c757d;
}

.odoo-timeline-description {
    font-size: 14px;
    color: #212529;
    margin: 0;
    line-height: 1.5;
}

/* Indicador de cambio (de ‚Üí a) */
.odoo-timeline-change {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
    padding: 6px 12px;
    background: #f8f9fa;
    border-radius: 8px;
    font-size: 13px;
}

.odoo-timeline-change-from {
    color: #6c757d;
    text-decoration: line-through;
}

.odoo-timeline-arrow {
    font-size: 16px;
    color: #9ca3af;
}

.odoo-timeline-change-to {
    color: #0097a7;
    font-weight: 600;
}

.odoo-timeline-detail {
    font-size: 13px;
    color: #6c757d;
    margin: 8px 0 0 0;
    font-style: italic;
}

.odoo-timeline-user {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    margin-top: 8px;
    font-size: 12px;
    color: #9ca3af;
}

.odoo-timeline-user .material-icons {
    font-size: 14px;
}

/* Estado vac√≠o */
.odoo-timeline-empty {
    display: flex;
    align-items: flex-start;
    gap: 14px;
    padding: 24px;
    text-align: left;
}

.odoo-timeline-empty > .material-icons {
    font-size: 32px;
    color: #d1d5db;
}

.odoo-timeline-empty-title {
    font-size: 14px;
    font-weight: 600;
    color: #6b7280;
    margin: 0 0 4px 0;
}

.odoo-timeline-empty-sub {
    font-size: 13px;
    color: #9ca3af;
    margin: 0;
}

/* Indicador de m√°s eventos */
.odoo-timeline-more {
    padding: 12px 20px;
    background: #f8f9fa;
    border-top: 1px solid #e9ecef;
    text-align: center;
    font-size: 12px;
    color: #6c757d;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   RESPONSIVE
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

@media (max-width: 576px) {
    .odoo-timeline-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }
    
    .odoo-timeline-list {
        padding: 16px;
    }
    
    .odoo-timeline-item {
        gap: 12px;
    }
    
    .odoo-timeline-icon {
        width: 32px;
        height: 32px;
    }
    
    .odoo-timeline-icon .material-icons {
        font-size: 16px;
    }
    
    .odoo-timeline-line {
        left: 15px;
        top: 32px;
    }
    
    .odoo-timeline-event-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 2px;
    }
    
    .odoo-timeline-change {
        flex-wrap: wrap;
    }
}
</style>
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     ESTILOS
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<style>


/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   TAB UNIDADES (decente, simple)
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

.odoo-unidades-head {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 12px;
    padding: 14px 16px;
    border: 1px solid #e9ecef;
    border-radius: 10px;
    background: #fbfcfd;
    margin-bottom: 14px;
}

.odoo-unidades-title {
    display: flex;
    gap: 10px;
    align-items: flex-start;
}

.odoo-unidades-title .material-icons {
    font-size: 22px;
    color: #017e84;
    margin-top: 1px;
}

.odoo-unidades-h {
    font-size: 14px;
    font-weight: 700;
    color: #212529;
    line-height: 1.2;
}

.odoo-unidades-sub {
    font-size: 12px;
    color: #6c757d;
    margin-top: 2px;
}

.odoo-unidades-counter {
    text-align: right;
    padding-left: 8px;
    flex-shrink: 0;
}

.odoo-unidades-counter-label {
    display: block;
    font-size: 11px;
    color: #6c757d;
    text-transform: uppercase;
    letter-spacing: 0.4px;
}

.odoo-unidades-counter-value {
    font-size: 20px;
    font-weight: 800;
    color: #212529;
    line-height: 1.1;
}

/* Lista */
.odoo-unidades-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.odoo-unidad-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
    padding: 12px 14px;
    border: 1px solid #e9ecef;
    border-radius: 10px;
    background: #ffffff;
    transition: transform 0.12s ease, box-shadow 0.12s ease, background 0.12s ease;
}

.odoo-unidad-row:hover {
    background: #fbfcfd;
    box-shadow: 0 8px 16px rgba(0,0,0,0.04);
    transform: translateY(-1px);
}

.odoo-unidad-left {
    display: flex;
    align-items: center;
    gap: 10px;
    min-width: 0;
}

.odoo-unidad-ico {
    font-size: 20px;
    color: #6c757d;
    flex-shrink: 0;
}

.odoo-unidad-text {
    min-width: 0;
}

.odoo-unidad-name {
    font-size: 14px;
    font-weight: 700;
    color: #212529;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 52vw;
}

.odoo-unidad-meta {
    font-size: 12px;
    color: #6c757d;
    margin-top: 2px;
}

.odoo-unidad-right {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-shrink: 0;
}

.odoo-unidad-pill {
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 999px;
    background: #f1f5f9;
    color: #374151;
    border: 1px solid #e2e8f0;
    white-space: nowrap;
}

.odoo-unidad-arrow {
    font-size: 20px;
    color: #c0c7cf;
}

/* Empty state */
.odoo-unidades-empty {
    display: flex;
    gap: 10px;
    align-items: flex-start;
    padding: 14px 16px;
    border: 1px dashed #dee2e6;
    border-radius: 10px;
    background: #ffffff;
    color: #6c757d;
}

.odoo-unidades-empty .material-icons {
    color: #6c757d;
}

.odoo-unidades-empty-title {
    font-size: 13px;
    font-weight: 700;
    color: #212529;
}

.odoo-unidades-empty-sub {
    font-size: 12px;
    margin-top: 2px;
}

/* Responsive */
@media (max-width: 480px) {
    .odoo-unidad-name {
        max-width: 60vw;
    }
}


/* Subsections: separar bien */
.odoo-subsection {
    margin-top: 28px;
    padding-top: 16px;
    border-top: 1px solid #e9ecef;
}

.odoo-subsection-strong {
    border-top: none;
    margin-top: 18px;
    padding-top: 0;
}

.odoo-subtitle-help {
    font-size: 12px;
    color: #6c757d;
    margin: 6px 0 12px 0;
}

.odoo-subtitle-strong {
    display: flex;
    align-items: center;
    gap: 8px;
}

.odoo-subtitle-badge {
    margin-left: 6px;
    font-size: 11px;
    padding: 3px 8px;
    border-radius: 999px;
    background: rgba(1,126,132,0.10);
    color: #017e84;
    border: 1px solid rgba(1,126,132,0.25);
}

/* Responsive cards */
@media (max-width: 992px) {
    .odoo-unidades-cards {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 480px) {
    .odoo-unidades-cards {
        grid-template-columns: 1fr;
    }
}


/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   BARRA DE CONTROL
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.odoo-control-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 16px;
    background: #f8f9fa;
    border-bottom: 1px solid #dee2e6;
    position: sticky;
    top: 0;
    z-index: 100;
}

.odoo-control-left,
.odoo-control-right {
    display: flex;
    align-items: center;
    gap: 8px;
}

.odoo-btn {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 6px 12px;
    font-size: 13px;
    font-weight: 500;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    text-decoration: none;
    transition: all 0.15s ease;
}

.odoo-btn .material-icons {
    font-size: 18px;
}

.odoo-btn-primary {
    background: #017e84;
    color: white;
}

.odoo-btn-primary:hover {
    background: #016166;
}

.odoo-btn-secondary {
    background: white;
    color: #495057;
    border: 1px solid #dee2e6;
}

.odoo-btn-secondary:hover {
    background: #e9ecef;
}

.odoo-breadcrumb {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 13px;
}

.odoo-breadcrumb-link {
    color: #017e84;
    text-decoration: none;
}

.odoo-breadcrumb-link:hover {
    text-decoration: underline;
}

.odoo-breadcrumb .material-icons {
    font-size: 16px;
    color: #6c757d;
}

.odoo-breadcrumb-current {
    color: #495057;
    font-weight: 500;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CONTAINER
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.odoo-detail-container {
    background: white;
    min-height: calc(100vh - 60px);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   HEADER
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.odoo-detail-header {
    display: flex;
    align-items: flex-start;
    gap: 20px;
    padding: 24px;
    border-bottom: 1px solid #e9ecef;
    background: linear-gradient(180deg, #f8f9fa 0%, white 100%);
}

.odoo-detail-avatar {
    width: 100px;
    height: 100px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    overflow: hidden;
}

.odoo-detail-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.odoo-avatar-initial {
    font-size: 42px;
    font-weight: 500;
    color: white;
}

.odoo-detail-info {
    flex: 1;
    min-width: 0;
}

.odoo-detail-name {
    font-size: 24px;
    font-weight: 600;
    color: #212529;
    margin: 0 0 8px 0;
}

.odoo-detail-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-bottom: 12px;
}

.odoo-badge {
    display: inline-flex;
    align-items: center;
    padding: 3px 10px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 500;
}

.odoo-badge-success {
    background: #d1fae5;
    color: #065f46;
}

.odoo-badge-warning {
    background: #fef3c7;
    color: #92400e;
}

.odoo-badge-danger {
    background: #fee2e2;
    color: #991b1b;
}

.odoo-badge-info {
    background: #dbeafe;
    color: #1e40af;
}

.odoo-badge-neutral {
    background: #f3f4f6;
    color: #374151;
}

.odoo-detail-quick {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
}

.odoo-quick-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 13px;
    color: #495057;
}

.odoo-quick-item .material-icons {
    font-size: 16px;
    color: #6c757d;
}

.odoo-quick-item a {
    color: #017e84;
    text-decoration: none;
}

.odoo-quick-item a:hover {
    text-decoration: underline;
}

.odoo-detail-code {
    text-align: right;
    flex-shrink: 0;
}

.odoo-code-label {
    display: block;
    font-size: 11px;
    color: #6c757d;
    text-transform: uppercase;
}

.odoo-code-value {
    font-size: 16px;
    font-weight: 600;
    color: #1e3a8a;
    font-family: 'Roboto Mono', monospace;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SITUATION CARD
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.odoo-situation-card {
    display: flex;
    gap: 16px;
    padding: 16px 24px;
    border-bottom: 1px solid #e9ecef;
}

.odoo-situation-ok {
    background: #f0fdf4;
}

.odoo-situation-warning {
    background: #fffbeb;
}

.odoo-situation-inactive {
    background: #fef2f2;
}

.odoo-situation-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.odoo-situation-ok .odoo-situation-icon {
    background: #d1fae5;
    color: #059669;
}

.odoo-situation-warning .odoo-situation-icon {
    background: #fef3c7;
    color: #d97706;
}

.odoo-situation-inactive .odoo-situation-icon {
    background: #fee2e2;
    color: #dc2626;
}

.odoo-situation-icon .material-icons {
    font-size: 20px;
}

.odoo-situation-content {
    flex: 1;
}

.odoo-situation-content strong {
    display: block;
    font-size: 13px;
    color: #212529;
    margin-bottom: 4px;
}

.odoo-situation-content p {
    margin: 0 0 4px 0;
    font-size: 13px;
    color: #495057;
}

.odoo-sit-label {
    font-weight: 600;
    color: #212529;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   TABS
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.odoo-detail-tabs {
    display: flex;
    gap: 0;
    padding: 0 24px;
    border-bottom: 1px solid #dee2e6;
    background: white;
    overflow-x: auto;
}

.odoo-tab {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 12px 16px;
    font-size: 13px;
    font-weight: 500;
    color: #6c757d;
    background: none;
    border: none;
    border-bottom: 2px solid transparent;
    cursor: pointer;
    transition: all 0.15s ease;
    white-space: nowrap;
}

.odoo-tab .material-icons {
    font-size: 18px;
}

.odoo-tab:hover {
    color: #495057;
    background: #f8f9fa;
}

.odoo-tab.active {
    color: #017e84;
    border-bottom-color: #017e84;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   TAB CONTENTS
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.odoo-tab-contents {
    padding: 24px;
}

.odoo-tab-content {
    display: none;
}

.odoo-tab-content.active {
    display: block;
}

.odoo-fields-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
}

.odoo-field {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.odoo-field-full {
    grid-column: 1 / -1;
}

.odoo-field label {
    font-size: 12px;
    font-weight: 500;
    color: #6c757d;
}

.odoo-field span {
    font-size: 14px;
    color: #212529;
}

.odoo-field a {
    color: #017e84;
    text-decoration: none;
}

.odoo-field a:hover {
    text-decoration: underline;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   TABLE
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.odoo-table-container {
    overflow-x: auto;
}

.odoo-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
}

.odoo-table th {
    text-align: left;
    padding: 10px 12px;
    background: #f8f9fa;
    color: #495057;
    font-weight: 500;
    border-bottom: 1px solid #dee2e6;
}

.odoo-table td {
    padding: 10px 12px;
    border-bottom: 1px solid #e9ecef;
    color: #212529;
}

.odoo-table tr:hover {
    background: #f8f9fa;
}

.odoo-table a {
    color: #017e84;
    text-decoration: none;
}

.odoo-table a:hover {
    text-decoration: underline;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   NOTES
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.odoo-notes-section {
    margin-top: 24px;
    padding-top: 20px;
    border-top: 1px solid #e9ecef;
}

.odoo-notes-section h3 {
    font-size: 14px;
    font-weight: 600;
    color: #212529;
    margin: 0 0 12px 0;
}

.odoo-notes-content {
    font-size: 14px;
    color: #495057;
    line-height: 1.6;
    background: #f8f9fa;
    padding: 16px;
    border-radius: 6px;
}

.odoo-empty {
    font-size: 13px;
    color: #6c757d;
    text-align: center;
    padding: 24px;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SECCIONES DE DETALLE (Formaci√≥n Ministerial y otros)
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.odoo-detail-section {
    margin-bottom: 24px;
    padding-bottom: 20px;
    border-bottom: 1px dashed #dee2e6;
}

.odoo-detail-section:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}

.odoo-section-header {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #017e84;
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 16px;
    padding-bottom: 8px;
    border-bottom: 1px solid #e9ecef;
}

.odoo-section-header .material-icons {
    font-size: 18px;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   RESPONSIVE
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
@media (max-width: 992px) {
    .odoo-fields-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .odoo-detail-header {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    .odoo-detail-quick {
        justify-content: center;
    }

    .odoo-detail-code {
        text-align: center;
    }

    .odoo-fields-grid {
        grid-template-columns: 1fr;
    }

    .odoo-control-bar {
        flex-wrap: wrap;
        gap: 8px;
    }

    .odoo-control-right {
        flex-wrap: wrap;
    }
}
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   LOCK / BLOQUEO DE SECCIONES PRIVADAS
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

.odoo-lock-box {
    max-width: 420px;
    margin: 40px auto;
    padding: 28px 26px;
    border-radius: 12px;
    background: #ffffff;
    border: 1px solid #e9ecef;
    text-align: center;
    box-shadow: 0 12px 24px rgba(0,0,0,0.04);
}

.odoo-lock-icon {
    font-size: 42px;
    color: #6c757d;
    margin-bottom: 12px;
}

.odoo-lock-box h3 {
    font-size: 15px;
    font-weight: 600;
    color: #212529;
    margin-bottom: 6px;
}

.odoo-lock-box p {
    font-size: 13px;
    color: #6c757d;
    margin-bottom: 18px;
}

/* Input */
.odoo-lock-box .odoo-input {
    width: 100%;
    padding: 10px 12px;
    font-size: 14px;
    border-radius: 6px;
    border: 1px solid #dee2e6;
    margin-bottom: 14px;
}

.odoo-lock-box .odoo-input:focus {
    outline: none;
    border-color: #017e84;
    box-shadow: 0 0 0 2px rgba(1,126,132,0.12);
}

/* Error */
.odoo-error {
    margin-top: 12px;
    font-size: 12px;
    color: #b91c1c;
    background: #fee2e2;
    padding: 6px 10px;
    border-radius: 6px;
}
/* Reingreso visual junto al nombre */
.reingreso-pill{
    margin-left: 6px;
    padding: 3px 8px;
    font-size: 12px;
    font-weight: 600;
    border-radius: 999px;
    vertical-align: middle;
}

.reingreso-reconciliado{
    background: #e9f8ee;
    color: #1f6b3a;
    border: 1px solid #bfe8cb;
}

.reingreso-traslado{
    background: #eef5ff;
    color: #1e4fa8;
    border: 1px solid #c9dcff;
}

</style>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     JAVASCRIPT
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Tab switching
    const tabs = document.querySelectorAll('.odoo-tab');
    const contents = document.querySelectorAll('.odoo-tab-content');

    tabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const targetId = 'tab-' + this.dataset.tab;

            // Remove active from all
            tabs.forEach(t => t.classList.remove('active'));
            contents.forEach(c => c.classList.remove('active'));

            // Add active to clicked
            this.classList.add('active');
            document.getElementById(targetId).classList.add('active');
        });
    });

    // Check URL for tab parameter
    const urlParams = new URLSearchParams(window.location.search);
    const tabParam = urlParams.get('tab');
    if (tabParam) {
        const targetTab = document.querySelector(`.odoo-tab[data-tab="${tabParam}"]`);
        if (targetTab) {
            targetTab.click();
        }
    }
    
});
</script>

<script>
function goTab(tab) {
  window.location.href = window.location.pathname + "?tab=" + tab;
}

/* ======================
   PRIVADO (como ya lo tienes)
====================== */
function desbloquearPrivado(pk) {
  const password = document.getElementById("privado-password").value;

  fetch(`/miembros/miembros/${pk}/privado/desbloquear/`, {
    method: "POST",
    headers: {
      "X-CSRFToken": "{{ csrf_token }}",
      "X-Requested-With": "XMLHttpRequest",
      "Content-Type": "application/x-www-form-urlencoded"
    },
    body: new URLSearchParams({ password })
  })
  .then(async (r) => {
    if (!r.ok) {
      const t = await r.text();
      throw new Error("HTTP " + r.status + " -> " + t.slice(0, 120));
    }
    return r.json();
  })
  .then(data => {
    if (data.ok) {
      goTab("privado");
    } else {
      const err = document.getElementById("privado-error");
      if (err) err.style.display = "block";
    }
  })
  .catch((e) => {
    console.error(e);
    const err = document.getElementById("privado-error");
    if (err) {
      err.style.display = "block";
      err.textContent = "Error al desbloquear (revisa URL/permisos).";
    }
  });
}

function bloquearPrivado(pk) {
  fetch(`/miembros/miembros/${pk}/privado/bloquear/`, {
    method: "POST",
    headers: {
      "X-CSRFToken": "{{ csrf_token }}",
      "X-Requested-With": "XMLHttpRequest"
    }
  })
  .then(async (r) => {
    if (!r.ok) {
      const t = await r.text();
      throw new Error("HTTP " + r.status + " -> " + t.slice(0, 120));
    }
    return r.json();
  })
  .then(data => {
    if (data.ok) goTab("privado");
  })
  .catch((e) => console.error(e));
}

/* ======================
   FINANZAS (igual patr√≥n que Privado)
====================== */
function desbloquearFinanzas(pk) {
  const password = document.getElementById("finanzas-password").value;

  fetch(`/miembros/miembros/${pk}/finanzas/desbloquear/`, {
    method: "POST",
    headers: {
      "X-CSRFToken": "{{ csrf_token }}",
      "X-Requested-With": "XMLHttpRequest",
      "Content-Type": "application/x-www-form-urlencoded"
    },
    body: new URLSearchParams({ password })
  })
  .then(async (r) => {
    if (!r.ok) {
      const t = await r.text();
      throw new Error("HTTP " + r.status + " -> " + t.slice(0, 120));
    }
    return r.json();
  })
  .then(data => {
    if (data.ok) {
      goTab("finanzas");
    } else {
      const err = document.getElementById("finanzas-error");
      if (err) err.style.display = "block";
    }
  })
  .catch((e) => {
    console.error(e);
    const err = document.getElementById("finanzas-error");
    if (err) {
      err.style.display = "block";
      err.textContent = "Error al desbloquear (revisa URL/permisos).";
    }
  });
}

function bloquearFinanzas(pk) {
  fetch(`/miembros/miembros/${pk}/finanzas/bloquear/`, {
    method: "POST",
    headers: {
      "X-CSRFToken": "{{ csrf_token }}",
      "X-Requested-With": "XMLHttpRequest"
    }
  })
  .then(async (r) => {
    if (!r.ok) {
      const t = await r.text();
      throw new Error("HTTP " + r.status + " -> " + t.slice(0, 120));
    }
    return r.json();
  })
  .then(data => {
    if (data.ok) goTab("finanzas");
  })
  .catch((e) => console.error(e));
}
</script>





{% endblock %}