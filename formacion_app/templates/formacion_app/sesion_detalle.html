{% extends 'formacion_app/base_formacion.html' %}
{% load static %}

{% block formacion_content %}
<div style="padding:16px;">
  <h2 style="margin:0 0 6px 0;">Sesión abierta</h2>
  <div style="color:#6c757d; margin-bottom:14px;">
    Grupo: <strong>{{ grupo.nombre }}</strong> · Fecha: <strong>{{ sesion.fecha }}</strong>
  </div>

  <div style="display:flex; gap:10px; flex-wrap:wrap;">
    <a href="{% url 'formacion:sesion_kiosko' sesion.id %}"
       style="background:#714B67;color:#fff;padding:10px 14px;border-radius:10px;text-decoration:none;display:inline-flex;gap:8px;align-items:center;">
      <span class="material-icons">dialpad</span>
      Modo kiosko (código)
    </a>

    <a href="{% url 'formacion:grupos' %}"
       style="background:#e9ecef;color:#212529;padding:10px 14px;border-radius:10px;text-decoration:none;display:inline-flex;gap:8px;align-items:center;">
      <span class="material-icons">arrow_back</span>
      Volver a grupos
    </a>
  </div>


  <div style="padding:16px;">

  <h3 style="margin-bottom:10px;">Asistencia</h3>

  {% if asistencias %}
    <div style="background:#fff;border:1px solid #e9ecef;border-radius:14px;padding:12px;">
      {% for a in asistencias %}
        <div style="display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #f1f1f1;">
          <div>
            {% firstof a.miembro.nombre_completo a.miembro.nombre a.miembro.nombres a.miembro.full_name a.miembro a.miembro_id "Miembro" %}

          </div>
          <div style="color:#6c757d;font-size:13px;">
            {{ a.marcado_en|date:"H:i" }}
          </div>
        </div>
      {% endfor %}
    </div>

    <div style="margin-top:8px;color:#6c757d;font-size:13px;">
      Presentes: {{ asistencias|length }}
    </div>

  {% else %}
    <div style="background:#fff;border:1px dashed #dee2e6;border-radius:14px;padding:14px;color:#6c757d;">
      Aún no hay asistencias registradas.
    </div>
  {% endif %}

</div>

</div>

{% endblock %}
