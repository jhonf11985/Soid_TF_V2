{% extends 'core/base_sidebar.html' %}
{% load static %}

{% block sidebar_role_label %}Finanzas{% endblock %}

{% block sidebar_menu %}
<nav class="sidebar-nav">
    
    <!-- Dashboard -->
    <a href="{% url 'finanzas_app:dashboard' %}" 
       class="sidebar-link {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
        <span class="material-icons">dashboard</span>
        <span>Dashboard</span>
    </a>

    <!-- Sección: Operaciones -->
    <div class="sidebar-section-title">Operaciones</div>
    
    <a href="{% url 'finanzas_app:movimientos_listado' %}" 
       class="sidebar-link {% if 'movimientos' in request.resolver_match.url_name %}active{% endif %}">
        <span class="material-icons">swap_horiz</span>
        <span>Movimientos</span>
    </a>
    
    <a href="{% url 'finanzas_app:transferencia_crear' %}" 
       class="sidebar-link {% if 'transferencia' in request.resolver_match.url_name %}active{% endif %}">
        <span class="material-icons">compare_arrows</span>
        <span>Transferencias</span>
    </a>

    <a href="{% url 'finanzas_app:cxp_list' %}"
       class="sidebar-link {% if 'cxp' in request.resolver_match.url_name %}active{% endif %}">
        <span class="material-icons">receipt_long</span>
        <span>Cuentas por pagar</span>
    </a>

    <!-- Sección: Catálogos -->
    <div class="sidebar-section-title">Catálogos</div>
    
    <a href="{% url 'finanzas_app:cuentas_listado' %}" 
       class="sidebar-link {% if 'cuenta' in request.resolver_match.url_name %}active{% endif %}">
        <span class="material-icons">account_balance</span>
        <span>Cuentas</span>
    </a>
    
    <a href="{% url 'finanzas_app:categorias_listado' %}" 
       class="sidebar-link {% if 'categoria' in request.resolver_match.url_name %}active{% endif %}">
        <span class="material-icons">category</span>
        <span>Categorías</span>
    </a>

    <a href="{% url 'finanzas_app:proveedores_list' %}"
       class="sidebar-link {% if 'proveedores' in request.resolver_match.url_name %}active{% endif %}">
        <span class="material-icons">groups</span>
        <span>Proveedores</span>
    </a>

    <!-- Sección: Reportes -->
    <div class="sidebar-section-title">Reportes</div>

    <a href="{% url 'finanzas_app:reportes_home' %}"
       class="sidebar-link {% if 'reportes' in request.path %}active{% endif %}">
        <span class="material-icons">assessment</span>
        <span>Reportes</span>
    </a>

</nav>

<!-- Resumen rápido -->
<div class="sidebar-summary">
    <div class="sidebar-summary-title">Este mes</div>
    <div class="sidebar-summary-row">
        <span>Ingresos</span>
        <span class="text-success">+{{ resumen_sidebar.ingresos|floatformat:0|default:"0" }}</span>
    </div>
    <div class="sidebar-summary-row">
        <span>Egresos</span>
        <span class="text-danger">-{{ resumen_sidebar.egresos|floatformat:0|default:"0" }}</span>
    </div>
</div>
{% endblock %}

{% block page_content %}
    {% if messages %}
    <div class="messages-container">
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
    {% endif %}
    
    {% block finanzas_content %}{% endblock %}
{% endblock %}