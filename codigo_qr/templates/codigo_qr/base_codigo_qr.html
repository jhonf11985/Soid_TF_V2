{% extends 'core/base_sidebar.html' %}
{% load static %}

{% block sidebar_role_label %}Código QR{% endblock %}

{% block sidebar_menu %}
<nav class="sidebar-nav">

    <!-- Dashboard / Inicio QR -->
    <a href="{% url 'codigo_qr:scan' %}"
       class="sidebar-link {% if request.resolver_match.url_name == 'scan' %}active{% endif %}">
        <span class="material-icons">qr_code_scanner</span>
        <span>Escanear</span>
    </a>

    <!-- Sección: Gestión -->
    <div class="sidebar-section-title">Gestión</div>

    <!-- (Preparado para la siguiente fase) -->
    <a href="#"
       class="sidebar-link disabled-link"
       onclick="return false;"
       style="opacity:.55; cursor:not-allowed;">
        <span class="material-icons">vpn_key</span>
        <span>Tokens</span>
    </a>

    <a href="#"
       class="sidebar-link disabled-link"
       onclick="return false;"
       style="opacity:.55; cursor:not-allowed;">
        <span class="material-icons">history</span>
        <span>Historial</span>
    </a>

</nav>

<!-- Resumen rápido en el sidebar (opcional, estilo finanzas) -->
<div class="sidebar-summary">
    <div class="sidebar-summary-title">Hoy</div>
    <div class="sidebar-summary-row">
        <span>Escaneos</span>
        <span>{{ resumen_qr.hoy|default:"0" }}</span>
    </div>
    <div class="sidebar-summary-row">
        <span>Errores</span>
        <span>{{ resumen_qr.errores|default:"0" }}</span>
    </div>
</div>
{% endblock %}

{% block page_content %}
    {% if messages %}
    <div class="messages-container">
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
    {% endif %}

    {% block codigo_qr_content %}{% endblock %}
{% endblock %}
