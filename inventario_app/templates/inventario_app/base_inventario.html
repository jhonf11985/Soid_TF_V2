{% extends 'core/base_sidebar.html' %}
{% load static %}

{% block sidebar_role_label %}Inventario{% endblock %}

{% block sidebar_menu %}
<nav class="sidebar-nav">

    <!-- Dashboard -->
    <a href="{% url 'inventario:dashboard' %}"
       class="sidebar-link {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}">
        <span class="material-icons">inventory_2</span>
        <span>Dashboard</span>
    </a>

    <!-- Sección: Recursos -->
    <div class="sidebar-section-title">Recursos</div>

    <a href="{% url 'inventario:recursos_lista' %}"
       class="sidebar-link {% if request.resolver_match.url_name == 'recursos_lista' %}active{% endif %}">
        <span class="material-icons">view_list</span>
        <span>Todos los recursos</span>
    </a>

    <a href="{% url 'inventario:recurso_nuevo' %}"
       class="sidebar-link {% if request.resolver_match.url_name == 'recurso_nuevo' %}active{% endif %}">
        <span class="material-icons">add_circle</span>
        <span>Nuevo recurso</span>
    </a>

    <!-- Sección: Movimientos -->
    <div class="sidebar-section-title">Movimientos</div>

    <a href="{% url 'inventario:movimientos_lista' %}"
       class="sidebar-link {% if request.resolver_match.url_name == 'movimientos_lista' %}active{% endif %}">
        <span class="material-icons">swap_horiz</span>
        <span>Historial</span>
    </a>

    <a href="{% url 'inventario:movimiento_nuevo' %}"
       class="sidebar-link {% if request.resolver_match.url_name == 'movimiento_nuevo' %}active{% endif %}">
        <span class="material-icons">compare_arrows</span>
        <span>Registrar movimiento</span>
    </a>

    <!-- Sección: Configuración -->
    <div class="sidebar-section-title">Configuración</div>

    <a href="{% url 'inventario:categorias_lista' %}"
       class="sidebar-link {% if 'categoria' in request.resolver_match.url_name %}active{% endif %}">
        <span class="material-icons">category</span>
        <span>Categorías</span>
    </a>

    <a href="{% url 'inventario:ubicaciones_lista' %}"
       class="sidebar-link {% if request.resolver_match.url_name == 'ubicaciones_lista' %}active{% endif %}">
        <span class="material-icons">warehouse</span>
        <span>Ubicaciones</span>
    </a>

    <a href="{% url 'inventario:ubicacion_nueva' %}"
       class="sidebar-link sidebar-sub {% if request.resolver_match.url_name == 'ubicacion_nueva' or request.resolver_match.url_name == 'ubicacion_editar' %}active{% endif %}">
        <span class="material-icons">add</span>
        <span>Nueva ubicación</span>
    </a>

    <!-- Sección: Accesos rápidos -->
    <div class="sidebar-section-title">Accesos rápidos</div>

    <a href="{% url 'inventario:recursos_lista' %}?estado=DISPONIBLE"
       class="sidebar-link">
        <span class="material-icons">check_circle</span>
        <span>Disponibles</span>
    </a>

    <a href="{% url 'inventario:recursos_lista' %}?estado=EN_REPARACION"
       class="sidebar-link">
        <span class="material-icons">build_circle</span>
        <span>En reparación</span>
    </a>

    <!-- Sección: Reportes -->
    <div class="sidebar-section-title">Reportes</div>

    <a href="{% url 'inventario:reportes' %}"
       class="sidebar-link {% if request.resolver_match.url_name == 'reportes' %}active{% endif %}">
        <span class="material-icons">assessment</span>
        <span>Reportes</span>
    </a>

</nav>

<!-- Resumen rápido en el sidebar -->
<div class="sidebar-summary">
    <div class="sidebar-summary-title">Resumen</div>

    <div class="sidebar-summary-row">
        <span>Total</span>
        <span>{{ resumen_sidebar.total|default:"0" }}</span>
    </div>

    <div class="sidebar-summary-row">
        <span>Disponibles</span>
        <span class="text-success">{{ resumen_sidebar.disponibles|default:"0" }}</span>
    </div>

    <div class="sidebar-summary-row">
        <span>En uso</span>
        <span>{{ resumen_sidebar.en_uso|default:"0" }}</span>
    </div>

    <div class="sidebar-summary-row">
        <span>En reparación</span>
        <span class="text-danger">{{ resumen_sidebar.en_reparacion|default:"0" }}</span>
    </div>
</div>
{% endblock %}

{% block page_content %}
    {% if messages %}
    <div class="messages-container">
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}    
    </div>
    {% endif %}

    {% block inventario_content %}{% endblock %}
{% endblock %}