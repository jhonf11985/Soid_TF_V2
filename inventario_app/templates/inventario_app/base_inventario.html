{% extends 'core/base_sidebar.html' %}
{% load static %}

{% block sidebar_role_label %}Inventario{% endblock %}

{% block sidebar_menu %}
<nav class="sidebar-nav">

    <!-- Dashboard -->
    <a href="/inventario/"
       class="sidebar-link {% if request.path == '/inventario/' %}active{% endif %}">
        <span class="material-icons">inventory_2</span>
        <span>Dashboard</span>
    </a>

    <!-- Sección: Recursos -->
    <div class="sidebar-section-title">Recursos</div>

    <a href="/inventario/recursos/"
       class="sidebar-link {% if '/inventario/recursos' in request.path %}active{% endif %}">
        <span class="material-icons">view_list</span>
        <span>Todos los recursos</span>
    </a>

    <a href="/inventario/recursos/nuevo/"
       class="sidebar-link {% if '/inventario/recursos/nuevo' in request.path %}active{% endif %}">
        <span class="material-icons">add_circle</span>
        <span>Nuevo recurso</span>
    </a>

    <!-- Sección: Movimientos -->
    <div class="sidebar-section-title">Movimientos</div>

    <a href="/inventario/movimientos/"
       class="sidebar-link {% if '/inventario/movimientos' in request.path %}active{% endif %}">
        <span class="material-icons">swap_horiz</span>
        <span>Historial de movimientos</span>
    </a>

    <a href="/inventario/movimientos/nuevo/"
       class="sidebar-link {% if '/inventario/movimientos/nuevo' in request.path %}active{% endif %}">
        <span class="material-icons">compare_arrows</span>
        <span>Registrar movimiento</span>
    </a>

    <!-- Sección: Configuración -->
    <div class="sidebar-section-title">Configuración</div>

    <a href="/inventario/categorias/"
       class="sidebar-link {% if '/inventario/categorias' in request.path %}active{% endif %}">
        <span class="material-icons">category</span>
        <span>Categorías</span>
    </a>

    <a href="/inventario/ubicaciones/"
       class="sidebar-link {% if '/inventario/ubicaciones' in request.path %}active{% endif %}">
        <span class="material-icons">warehouse</span>
        <span>Ubicaciones</span>
    </a>

    <!-- Sección: Accesos rápidos -->
    <div class="sidebar-section-title">Accesos rápidos</div>

    <a href="/inventario/recursos/?estado=DISPONIBLE"
       class="sidebar-link">
        <span class="material-icons">check_circle</span>
        <span>Disponibles</span>
    </a>

    <a href="/inventario/recursos/?estado=EN_REPARACION"
       class="sidebar-link">
        <span class="material-icons">build_circle</span>
        <span>En reparación</span>
    </a>

    <!-- Sección: Reportes -->
    <div class="sidebar-section-title">Reportes</div>

    <a href="/inventario/reportes/"
       class="sidebar-link {% if '/inventario/reportes' in request.path %}active{% endif %}">
        <span class="material-icons">assessment</span>
        <span>Reportes</span>
    </a>

</nav>

<!-- Resumen rápido en el sidebar (igual que finanzas, pero neutro) -->
<div class="sidebar-summary">
    <div class="sidebar-summary-title">Resumen</div>

    <div class="sidebar-summary-row">
        <span>Total</span>
        <span>{{ resumen_sidebar.total|default:"0" }}</span>
    </div>

    <div class="sidebar-summary-row">
        <span>Disponibles</span>
        <span class="text-success">{{ resumen_sidebar.disponibles|default:"0" }}</span>
    </div>

    <div class="sidebar-summary-row">
        <span>En uso</span>
        <span>{{ resumen_sidebar.en_uso|default:"0" }}</span>
    </div>

    <div class="sidebar-summary-row">
        <span>En reparación</span>
        <span class="text-danger">{{ resumen_sidebar.en_reparacion|default:"0" }}</span>
    </div>
</div>
{% endblock %}

{% block page_content %}
    {% if messages %}
    <div class="messages-container">
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
    {% endif %}

    {% block inventario_content %}{% endblock %}
{% endblock %}
