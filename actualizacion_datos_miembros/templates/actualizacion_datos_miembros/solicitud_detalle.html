<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Detalle solicitud</title>
</head>
<body style="font-family:system-ui;padding:18px;background:#f6f7fb">
  <div style="max-width:1100px;margin:0 auto;background:#fff;border:1px solid #e6e8ef;border-radius:14px;padding:18px">
    <h2 style="margin:0 0 6px">Detalle de solicitud</h2>
    <p style="margin:0;color:#667085">
      {{ s.miembro.nombres }} {{ s.miembro.apellidos }}
      {% if s.miembro.codigo %} · {{ s.miembro.codigo }}{% endif %}
      · <b>{{ s.get_estado_display }}</b>
    </p>

    <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
      {% if s.estado == Estados.PENDIENTE %}
      <form method="post" action="{% url 'actualizacion_datos_miembros:solicitud_aplicar' s.pk %}">
        {% csrf_token %}
        <button style="padding:10px 12px;border:0;border-radius:10px;background:#111;color:#fff;font-weight:800;cursor:pointer">Aplicar</button>
      </form>

      <form method="post" action="{% url 'actualizacion_datos_miembros:solicitud_rechazar' s.pk %}" style="display:flex;gap:8px;flex-wrap:wrap">
        {% csrf_token %}
        <input name="nota_admin" placeholder="Motivo (opcional)" style="padding:10px 12px;border:1px solid #d0d5dd;border-radius:10px;min-width:260px">
        <button style="padding:10px 12px;border:1px solid #d0d5dd;border-radius:10px;background:#fff;font-weight:800;cursor:pointer">Rechazar</button>
      </form>
      {% endif %}
    </div>

    <hr style="margin:16px 0;border:none;border-top:1px solid #e6e8ef">

    <h3 style="margin:0 0 10px">Datos solicitados</h3>
    <table style="width:100%;border-collapse:collapse">
      <tbody>
        <tr><td style="padding:8px;color:#667085;width:220px">Teléfono</td><td style="padding:8px">{{ s.telefono|default:"—" }}</td></tr>
        <tr><td style="padding:8px;color:#667085">WhatsApp</td><td style="padding:8px">{{ s.whatsapp|default:"—" }}</td></tr>
        <tr><td style="padding:8px;color:#667085">Email</td><td style="padding:8px">{{ s.email|default:"—" }}</td></tr>

        <tr><td style="padding:8px;color:#667085">Dirección</td><td style="padding:8px">{{ s.direccion|default:"—" }}</td></tr>
        <tr><td style="padding:8px;color:#667085">Sector</td><td style="padding:8px">{{ s.sector|default:"—" }}</td></tr>
        <tr><td style="padding:8px;color:#667085">Ciudad</td><td style="padding:8px">{{ s.ciudad|default:"—" }}</td></tr>
        <tr><td style="padding:8px;color:#667085">Provincia</td><td style="padding:8px">{{ s.provincia|default:"—" }}</td></tr>
        <tr><td style="padding:8px;color:#667085">Código postal</td><td style="padding:8px">{{ s.codigo_postal|default:"—" }}</td></tr>

        <tr><td style="padding:8px;color:#667085">Empleador</td><td style="padding:8px">{{ s.empleador|default:"—" }}</td></tr>
        <tr><td style="padding:8px;color:#667085">Puesto</td><td style="padding:8px">{{ s.puesto|default:"—" }}</td></tr>
        <tr><td style="padding:8px;color:#667085">Teléfono trabajo</td><td style="padding:8px">{{ s.telefono_trabajo|default:"—" }}</td></tr>
        <tr><td style="padding:8px;color:#667085">Dirección trabajo</td><td style="padding:8px">{{ s.direccion_trabajo|default:"—" }}</td></tr>

        <tr><td style="padding:8px;color:#667085">Contacto emergencia</td><td style="padding:8px">{{ s.contacto_emergencia_nombre|default:"—" }}</td></tr>
        <tr><td style="padding:8px;color:#667085">Tel. emergencia</td><td style="padding:8px">{{ s.contacto_emergencia_telefono|default:"—" }}</td></tr>
        <tr><td style="padding:8px;color:#667085">Relación</td><td style="padding:8px">{{ s.contacto_emergencia_relacion|default:"—" }}</td></tr>

        <tr><td style="padding:8px;color:#667085">Tipo de sangre</td><td style="padding:8px">{{ s.tipo_sangre|default:"—" }}</td></tr>
        <tr><td style="padding:8px;color:#667085">Alergias</td><td style="padding:8px">{{ s.alergias|default:"—" }}</td></tr>
        <tr><td style="padding:8px;color:#667085">Condiciones médicas</td><td style="padding:8px">{{ s.condiciones_medicas|default:"—" }}</td></tr>
        <tr><td style="padding:8px;color:#667085">Medicamentos</td><td style="padding:8px">{{ s.medicamentos|default:"—" }}</td></tr>
      </tbody>
    </table>

    <hr style="margin:16px 0;border:none;border-top:1px solid #e6e8ef">
    <p style="margin:0;color:#667085;font-size:13px">
      Enviada: {{ s.creado_en|date:"d/m/Y H:i" }}
      {% if s.ip_origen %} · IP: {{ s.ip_origen }}{% endif %}
    </p>
  </div>
</body>
</html>
