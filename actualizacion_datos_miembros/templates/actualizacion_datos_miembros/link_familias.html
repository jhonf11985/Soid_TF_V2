{% extends "actualizacion_datos_miembros/base_actualizacion.html" %}
{% block content %}
  <h2>Generar link de familia</h2>

  <form method="get" style="margin:12px 0;">
    <input type="text" name="q" value="{{ q }}" placeholder="Buscar miembro (nombre o cÃ©dula)" />
    <button type="submit">Buscar</button>
  </form>

  {% if resultados %}
    <form method="post">
      {% csrf_token %}
      <label>Selecciona el cabeza del hogar</label>
      <select name="miembro_id" required>
        {% for m in resultados %}
          <option value="{{ m.id }}">{{ m.nombres }} {{ m.apellidos }}{% if m.cedula %} - {{ m.cedula }}{% endif %}</option>
        {% endfor %}
      </select>
      <button type="submit">Generar link</button>
    </form>
  {% elif q %}
    <p>No se encontraron resultados.</p>
  {% endif %}

  {% if link %}
    <hr>
    <p><strong>Link generado:</strong></p>
    <p><a href="{{ link }}" target="_blank">{{ link }}</a></p>
  {% endif %}
{% endblock %}
