{% extends 'core/base_sidebar.html' %}
{% load static %}

{% block sidebar_icon %}sync{% endblock %}
{% block sidebar_role_label %}Actualización{% endblock %}

{% block sidebar_menu %}
<nav class="sidebar-nav">

  <!-- =====================================
       SOLICITUDES DE ACTUALIZACIÓN
       ===================================== -->
  <div class="sidebar-section-title">Actualización de datos</div>

  <a href="{% url 'actualizacion_datos_miembros:solicitudes_lista' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'solicitudes_lista' and not request.GET.estado %}active{% endif %}">
    <span class="material-icons">inbox</span>
    <span>Todas las solicitudes</span>
  </a>

  <a href="{% url 'actualizacion_datos_miembros:solicitudes_lista' %}?estado=pendiente"
     class="sidebar-link {% if request.GET.estado == 'pendiente' and 'solicitudes' in request.path and 'familia' not in request.path %}active{% endif %}">
    <span class="material-icons">schedule</span>
    <span>Pendientes</span>
  </a>

  <a href="{% url 'actualizacion_datos_miembros:links_lista' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'links_lista' %}active{% endif %}">
    <span class="material-icons">link</span>
    <span>Links generados</span>
  </a>

  <!-- =====================================
       ALTAS (REGISTRO MASIVO)
       ===================================== -->
  <div class="sidebar-section-title">Altas de miembros</div>

  <a href="{% url 'actualizacion_datos_miembros:altas_lista' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'altas_lista' and not request.GET.estado %}active{% endif %}">
    <span class="material-icons">person_add</span>
    <span>Todas las altas</span>
  </a>

  <a href="{% url 'actualizacion_datos_miembros:altas_lista' %}?estado=pendiente"
     class="sidebar-link {% if request.GET.estado == 'pendiente' and 'altas' in request.path %}active{% endif %}">
    <span class="material-icons">schedule</span>
    <span>Pendientes</span>
  </a>

  <a href="{% url 'actualizacion_datos_miembros:alta_masiva_link' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'alta_masiva_link' %}active{% endif %}">
    <span class="material-icons">campaign</span>
    <span>Link público de alta</span>
  </a>

  <!-- =====================================
       FAMILIAS
       ===================================== -->
  <div class="sidebar-section-title">Familias</div>

  <a href="{% url 'actualizacion_datos_miembros:familia_solicitudes_lista' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'familia_solicitudes_lista' and not request.GET.estado %}active{% endif %}">
    <span class="material-icons">family_restroom</span>
    <span>Solicitudes de familia</span>
  </a>

  <a href="{% url 'actualizacion_datos_miembros:familia_solicitudes_lista' %}?estado=pendiente"
     class="sidebar-link {% if request.GET.estado == 'pendiente' and 'familia' in request.path %}active{% endif %}">
    <span class="material-icons">schedule</span>
    <span>Pendientes</span>
  </a>

  <a href="{% url 'actualizacion_datos_miembros:familia_alertas' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'familia_alertas' %}active{% endif %}">
    <span class="material-icons">report</span>
    <span>Alertas / Conflictos</span>
  </a>

  <a href="{% url 'actualizacion_datos_miembros:familia_links_lista' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'familia_links_lista' %}active{% endif %}">
    <span class="material-icons">link</span>
    <span>Links generados</span>
  </a>

  <a href="{% url 'actualizacion_datos_miembros:generar_link_familia' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'generar_link_familia' %}active{% endif %}">
    <span class="material-icons">add_link</span>
    <span>Generar nuevo link</span>
  </a>

  <!-- =====================================
       CONFIGURACIÓN
       ===================================== -->
  <div class="sidebar-section-title">Configuración</div>

  <a href="{% url 'actualizacion_datos_miembros:actualizacion_config' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'actualizacion_config' %}active{% endif %}">
    <span class="material-icons">tune</span>
    <span>Formulario público</span>
  </a>

  <a href="{% url 'actualizacion_datos_miembros:alta_masiva_config' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'alta_masiva_config' %}active{% endif %}">
    <span class="material-icons">settings</span>
    <span>Config. alta masiva</span>
  </a>

  <!-- =====================================
       ATAJOS
       ===================================== -->
  <div class="sidebar-section-title">Atajos</div>

  <a href="{% url 'miembros_app:lista' %}" class="sidebar-link">
    <span class="material-icons">group</span>
    <span>Ver miembros</span>
  </a>

</nav>
{% endblock %}

{% block page_content %}
  {% if messages %}
    <div class="messages-container">
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  {% block actualizacion_content %}{% endblock %}
{% endblock %}