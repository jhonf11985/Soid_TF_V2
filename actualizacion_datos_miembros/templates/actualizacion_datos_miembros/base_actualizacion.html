{% extends 'core/base_sidebar.html' %}
{% load static %}

{% block sidebar_icon %}sync{% endblock %}
{% block sidebar_role_label %}Actualización{% endblock %}

{% block sidebar_menu %}
<nav class="sidebar-nav">

  <a href="{% url 'actualizacion_datos_miembros:solicitudes_lista' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'solicitudes_lista' %}active{% endif %}">
    <span class="material-icons">inbox</span>
    <span>Solicitudes</span>
  </a>

  <div class="sidebar-section-title">Gestión</div>

  <a href="{% url 'actualizacion_datos_miembros:solicitudes_lista' %}?estado={{ Estados.PENDIENTE }}"
     class="sidebar-link">
    <span class="material-icons">schedule</span>
    <span>Pendientes</span>
  </a>

  <a href="{% url 'actualizacion_datos_miembros:solicitudes_lista' %}?estado={{ Estados.APLICADA }}"
     class="sidebar-link">
    <span class="material-icons">task_alt</span>
    <span>Aplicadas</span>
  </a>

  <a href="{% url 'actualizacion_datos_miembros:solicitudes_lista' %}?estado={{ Estados.RECHAZADA }}"
     class="sidebar-link">
    <span class="material-icons">cancel</span>
    <span>Rechazadas</span>
  </a>

  <!-- =====================================
       NUEVO: ALTAS (REGISTRO MASIVO)
       ===================================== -->
  <div class="sidebar-section-title">Altas</div>

  <a href="{% url 'actualizacion_datos_miembros:altas_lista' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'altas_lista' %}active{% endif %}">
    <span class="material-icons">person_add</span>
    <span>Solicitudes de alta</span>
  </a>

  <a href="{% url 'actualizacion_datos_miembros:altas_lista' %}?estado={{ EstadosAlta.PENDIENTE }}"
     class="sidebar-link">
    <span class="material-icons">schedule</span>
    <span>Altas pendientes</span>
  </a>

  <a href="{% url 'actualizacion_datos_miembros:altas_lista' %}?estado={{ EstadosAlta.APROBADA }}"
     class="sidebar-link">
    <span class="material-icons">task_alt</span>
    <span>Altas aprobadas</span>
  </a>

  <a href="{% url 'actualizacion_datos_miembros:altas_lista' %}?estado={{ EstadosAlta.RECHAZADA }}"
     class="sidebar-link">
    <span class="material-icons">cancel</span>
    <span>Altas rechazadas</span>
  </a>


  <a href="{% url 'actualizacion_datos_miembros:alta_masiva_link' %}"
    class="sidebar-link {% if request.resolver_match.url_name == 'alta_masiva_link' %}active{% endif %}">
    <span class="material-icons">campaign</span>
    <span>Link de alta masiva</span>
  </a>

    <!-- =====================================
       LINKS DE ACTUALIZACIÓN (por miembro)
       ===================================== -->
  <a href="{% url 'actualizacion_datos_miembros:links_lista' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'links_lista' %}active{% endif %}">
    <span class="material-icons">link</span>
    <span>Links de actualización</span>
  </a>


  <div class="sidebar-section-title">Atajos</div>

  <a href="{% url 'miembros_app:lista' %}" class="sidebar-link">
    <span class="material-icons">group</span>
    <span>Miembros</span>
  </a>

    <!-- =====================================
       FAMILIAS (LINK POR CABEZA DE HOGAR)
       ===================================== -->
  <div class="sidebar-section-title">Familias</div>

  <a href="{% url 'actualizacion_datos_miembros:familia_links_lista' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'familia_links_lista' %}active{% endif %}">
    <span class="material-icons">family_restroom</span>
    <span>Links de familia</span>
  </a>

  <a href="{% url 'actualizacion_datos_miembros:generar_link_familia' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'generar_link_familia' %}active{% endif %}">
    <span class="material-icons">add_link</span>
    <span>Generar link familia</span>
  </a>

  <a href="{% url 'actualizacion_datos_miembros:familia_alertas' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'familia_alertas' %}active{% endif %}">
    <span class="material-icons">report</span>
    <span>Alertas familiares</span>
  </a>

  <!-- =====================================
       CONFIGURACIÓN
       ===================================== -->
  <div class="sidebar-section-title">Configuración</div>

  <a href="{% url 'actualizacion_datos_miembros:actualizacion_config' %}"
     class="sidebar-link {% if request.resolver_match.url_name == 'actualizacion_config' %}active{% endif %}">
    <span class="material-icons">tune</span>
    <span>Formulario público</span>
  </a>

</nav>
{% endblock %}

{% block page_content %}
  {% if messages %}
    <div class="messages-container">
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  {% block actualizacion_content %}{% endblock %}
{% endblock %}
