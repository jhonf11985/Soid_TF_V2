{% extends 'core/base.html' %}

{% block title %}Inicio · Soid_Tf_2{% endblock %}

{% block content %}
<div class="app-container">
    <div class="app-grid">
        {% for module in modules %}
    <a href="{% url module.url_name %}" class="odoo-app">
        <div class="odoo-app-icon" style="background-color: {{ module.color|default:'#6772e5' }}">
            <span class="material-icons">
                {{ module.icon|default:"apps" }}
            </span>
        </div>
        <div class="odoo-app-name">
            {{ module.name }}
        </div>
    </a>
{% empty %}
    <p>No hay módulos activos.</p>
{% endfor %}

{% if user.is_staff %}
    <a href="{% url 'admin:index' %}" class="odoo-app">
        <div class="odoo-app-icon" style="background-color: #444;">
            <span class="material-icons">
                admin_panel_settings
            </span>
        </div>
        <div class="odoo-app-name">
            Administración
        </div>
    </a>
{% endif %}


    </div>
</div>
<!-- BOTÓN FLOTANTE CON MENÚ – HOME -->
<div class="fab-home-wrapper" id="fabHomeWrapper">
    <!-- Botón principal -->
    <button type="button" class="fab-home-main" id="fabHomeMain">
        <span class="material-icons">add</span>
    </button>

    <!-- Acciones secundarias -->
    <div class="fab-home-actions">
        <a href="/miembros/nuevos-creyentes/registrar/" class="fab-home-action">
            <span class="fab-home-action-label">Registrar nuevo creyente</span>
            <span class="material-icons fab-home-action-icon">hail</span>
        </a>

        <a href="/miembros/crear/" class="fab-home-action">
            <span class="fab-home-action-label">Crear miembro</span>
            <span class="material-icons fab-home-action-icon">person_add</span>
        </a>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const wrapper = document.getElementById('fabHomeWrapper');
    const mainBtn = document.getElementById('fabHomeMain');

    if (!wrapper || !mainBtn) return;

    function toggleFab() {
        wrapper.classList.toggle('is-open');
    }

    mainBtn.addEventListener('click', function (e) {
        e.stopPropagation();
        toggleFab();
    });

    // Cerrar al hacer clic fuera
    document.addEventListener('click', function () {
        wrapper.classList.remove('is-open');
    });

    // Evitar que al hacer clic dentro del menú se cierre antes de navegar
    wrapper.addEventListener('click', function (e) {
        e.stopPropagation();
    });
});
</script>
{% endblock %}

<!-- Versión: 2025-12-01-1 -->

