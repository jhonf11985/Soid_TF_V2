{% extends 'core/base.html' %}

{% block title %}Configuración del sistema · Soid_Tf_2{% endblock %}

{% block breadcrumb %}
Configuración del sistema
{% endblock %}

{% block content %}

<div class="config-page">

    <!-- Header -->
    <header class="config-header">
        <h1 class="config-title">Configuración del sistema</h1>
        <p class="config-subtitle">
            Personaliza y ajusta los parámetros de tu sistema según las necesidades de tu iglesia.
        </p>
    </header>

    <!-- ============================================
         CONFIGURACIÓN DE LA IGLESIA
    ============================================ -->
    <div class="config-section">
        <h2 class="section-title">
            <span class="material-icons">church</span>
            Configuración de la iglesia
        </h2>

        <div class="config-grid">

            <!-- General -->
            <a href="{% url 'core:configuracion_general' %}" class="config-card">
                <div class="config-card-icon" style="background: linear-gradient(135deg, #0097A7, #00838f);">
                    <span class="material-icons">domain</span>
                </div>
                <div class="config-card-info">
                    <h3>Configuración general</h3>
                    <p>Nombre de la iglesia, dirección, pastor principal y logos institucionales.</p>
                </div>
                <span class="material-icons arrow">chevron_right</span>
            </a>

            <!-- Contacto -->
            <a href="{% url 'core:configuracion_contacto' %}" class="config-card">
                <div class="config-card-icon" style="background: linear-gradient(135deg, #10b981, #059669);">
                    <span class="material-icons">contact_phone</span>
                </div>
                <div class="config-card-info">
                    <h3>Contacto y comunicación</h3>
                    <p>Correo oficial, teléfono, WhatsApp, redes sociales y horarios.</p>
                </div>
                <span class="material-icons arrow">chevron_right</span>
            </a>

            <!-- Reportes -->
            <a href="{% url 'core:configuracion_reportes' %}" class="config-card">
                <div class="config-card-icon" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">
                    <span class="material-icons">description</span>
                </div>
                <div class="config-card-info">
                    <h3>Parámetros y reportes</h3>
                    <p>Formatos de fecha, colores, prefijos de código y opciones de impresión.</p>
                </div>
                <span class="material-icons arrow">chevron_right</span>
            </a>

        </div>
    </div>

    <!-- ============================================
         GESTIÓN DE USUARIOS
    ============================================ -->
    <div class="config-section">
        <h2 class="section-title">
            <span class="material-icons">group</span>
            Gestión de usuarios
        </h2>

        <div class="config-grid">

            <!-- Listado de usuarios -->
            <a href="{% url 'core:listado' %}" class="config-card">
                <div class="config-card-icon" style="background: linear-gradient(135deg, #3b82f6, #2563eb);">
                    <span class="material-icons">people</span>
                </div>
                <div class="config-card-info">
                    <h3>Usuarios del sistema</h3>
                    <p>Ver listado completo, buscar, filtrar por grupo y gestionar accesos.</p>
                </div>
                <span class="material-icons arrow">chevron_right</span>
            </a>

            <!-- Crear usuario -->
            <a href="{% url 'core:crear_usuario' %}" class="config-card">
                <div class="config-card-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                    <span class="material-icons">person_add</span>
                </div>
                <div class="config-card-info">
                    <h3>Crear usuario</h3>
                    <p>Agregar nuevo usuario, asignar rol y vincular a miembro existente.</p>
                </div>
                <span class="material-icons arrow">chevron_right</span>
            </a>

            {% if user.is_staff %}
            <!-- Permisos y roles -->
            <a href="{% url 'core:configuracion_permisos' %}" class="config-card config-card-admin">
                <div class="config-card-icon" style="background: linear-gradient(135deg, #ef4444, #dc2626);">
                    <span class="material-icons">admin_panel_settings</span>
                </div>
                <div class="config-card-info">
                    <h3>Permisos y roles</h3>
                    <p>Configurar qué puede hacer cada rol y asignar usuarios a grupos.</p>
                </div>
                <span class="material-icons arrow">chevron_right</span>
            </a>
            {% endif %}

        </div>
    </div>

    <!-- ============================================
         HERRAMIENTAS (solo staff)
    ============================================ -->
    {% if user.is_staff %}
    <div class="config-section">
        <h2 class="section-title">
            <span class="material-icons">build</span>
            Herramientas avanzadas
        </h2>

        <div class="config-grid">

            <!-- Admin Django -->
            <a href="{% url 'admin:index' %}" class="config-card config-card-admin">
                <div class="config-card-icon" style="background: linear-gradient(135deg, #475569, #334155);">
                    <span class="material-icons">terminal</span>
                </div>
                <div class="config-card-info">
                    <h3>Panel de administración</h3>
                    <p>Acceso directo al admin de Django para gestión avanzada.</p>
                </div>
                <span class="material-icons arrow">chevron_right</span>
            </a>

            <!-- Probar correo -->
            <a href="{% url 'core:probar_envio_correo' %}" class="config-card">
                <div class="config-card-icon" style="background: linear-gradient(135deg, #ec4899, #db2777);">
                    <span class="material-icons">forward_to_inbox</span>
                </div>
                <div class="config-card-info">
                    <h3>Probar envío de correo</h3>
                    <p>Verificar que la configuración de correo funciona correctamente.</p>
                </div>
                <span class="material-icons arrow">chevron_right</span>
            </a>

        </div>
    </div>
    {% endif %}

</div>

<style>
/* ============================
   CONFIG PAGE - ESTILO REPORTES
   ============================ */

.config-page {
    max-width: 1100px;
    margin: 0 auto;
    padding: 24px 20px 60px;
}

/* Header */
.config-header {
    margin-bottom: 32px;
}

.config-title {
    font-size: 26px;
    font-weight: 700;
    color: #1f2937;
    margin: 0 0 8px;
}

.config-subtitle {
    font-size: 15px;
    color: #6b7280;
    margin: 0;
    line-height: 1.5;
}

/* Secciones */
.config-section {
    margin-bottom: 36px;
}

.section-title {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 16px;
    font-weight: 600;
    color: #374151;
    margin: 0 0 16px;
    padding-bottom: 12px;
    border-bottom: 2px solid #f3f4f6;
}

.section-title .material-icons {
    font-size: 22px;
    color: #0097A7;
}

/* Grid de cards */
.config-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 16px;
}

/* Cards */
.config-card {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 20px;
    background: #fff;
    border: 1px solid #e5e7eb;
    border-radius: 14px;
    text-decoration: none;
    transition: all 0.2s ease;
    position: relative;
}

.config-card:hover {
    border-color: #d1d5db;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    transform: translateY(-2px);
}

.config-card:active {
    transform: translateY(0);
}

/* Card admin */
.config-card-admin {
    background: linear-gradient(135deg, #fafafa 0%, #f5f5f5 100%);
}

.config-card-admin::before {
    content: "ADMIN";
    position: absolute;
    top: 10px;
    right: 10px;
    background: #475569;
    color: white;
    font-size: 9px;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 4px;
    letter-spacing: 0.5px;
}

/* Icono del card */
.config-card-icon {
    width: 56px;
    height: 56px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.config-card-icon .material-icons {
    font-size: 28px;
    color: #fff;
}

/* Info del card */
.config-card-info {
    flex: 1;
    min-width: 0;
}

.config-card-info h3 {
    font-size: 16px;
    font-weight: 600;
    color: #1f2937;
    margin: 0 0 6px;
}

.config-card-info p {
    font-size: 13px;
    color: #6b7280;
    margin: 0;
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* Flecha */
.config-card .arrow {
    font-size: 24px;
    color: #d1d5db;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.config-card:hover .arrow {
    color: #0097A7;
    transform: translateX(4px);
}

/* ============================
   RESPONSIVE
   ============================ */

@media (max-width: 768px) {
    .config-page {
        padding: 20px 16px 60px;
    }

    .config-title {
        font-size: 22px;
    }

    .config-subtitle {
        font-size: 14px;
    }

    .config-grid {
        grid-template-columns: 1fr;
        gap: 12px;
    }

    .config-card {
        padding: 16px;
        gap: 14px;
    }

    .config-card-icon {
        width: 50px;
        height: 50px;
        border-radius: 12px;
    }

    .config-card-icon .material-icons {
        font-size: 26px;
    }

    .config-card-info h3 {
        font-size: 15px;
    }

    .config-card-info p {
        font-size: 12px;
    }

    .section-title {
        font-size: 15px;
    }

    .section-title .material-icons {
        font-size: 20px;
    }
}

@media (max-width: 480px) {
    .config-page {
        padding: 16px 12px 60px;
    }

    .config-title {
        font-size: 20px;
    }

    .config-card {
        padding: 14px 12px;
        gap: 12px;
    }

    .config-card-icon {
        width: 46px;
        height: 46px;
    }

    .config-card-icon .material-icons {
        font-size: 24px;
    }

    .config-card .arrow {
        font-size: 22px;
    }

    .config-card-admin::before {
        top: 8px;
        right: 8px;
        font-size: 8px;
    }
}

/* ============================
   ANIMACIONES
   ============================ */

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.config-section {
    animation: fadeInUp 0.4s ease forwards;
}

.config-section:nth-child(2) { animation-delay: 0.05s; }
.config-section:nth-child(3) { animation-delay: 0.1s; }
.config-section:nth-child(4) { animation-delay: 0.15s; }
</style>

{% endblock %}